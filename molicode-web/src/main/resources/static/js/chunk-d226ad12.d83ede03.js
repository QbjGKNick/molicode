(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d226ad12"],{"07fb":function(e,t,s){"use strict";s("e2ee")},"09ae":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Input",{attrs:{disabled:e.disabled},on:{"on-change":e.updateValue},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},[s("Button",{directives:[{name:"show",rawName:"v-show",value:"headless"!=e.windowName,expression:"windowName!='headless'"}],attrs:{slot:"append",icon:"ios-search",type:"primary",disabled:e.disabled},on:{click:e.fileChooser},slot:"append"},[e._v("选择\n  ")]),s("Button",{directives:[{name:"show",rawName:"v-show",value:"headless"!=e.windowName,expression:"windowName!='headless'"}],attrs:{slot:"append",icon:"document"},on:{click:e.openFile},slot:"append"},[e._v("open")])],1)],1)},n=[],a=s("e6fd"),o=s("86b0"),r={name:"fileChooser",props:{value:{type:String,default:""},dialogType:{type:String,default:"open"},fileType:{type:String,default:"all"},fileExt:{type:String,default:""},disabled:{type:Boolean,default:!1},changeCurPath:{type:String,default:""},parentPath:{type:String,default:""}},data:function(){return{model:this.value,windowName:this.$store.state.autoCode.profile["browserWindowName"]}},watch:{value:function(e,t){this.model=e}},methods:{updateValue:function(){var e=this.model;this.$emit("input",e)},fileChooser:function(){o["a"].postSubmit(this,a["a"].urls.common.file.fileChooser,this.getRequestData(),(function(e){null!==e.value&&""!==e.value&&(this.model=e.value,this.updateValue())}),null,!1);var e=this.$store.state.autoCode.profile["browserWindowName"];"swing"===e&&this.$Message.warning({content:"文件在swing窗口中打开，请切换界面进行文件选择！",duration:5})},openFile:function(){var e=this.getRequestData();e["editFilePath"]=this.model,""!==e["editFilePath"]?o["a"].postSubmit(this,a["a"].urls.common.file.openFile,e,(function(e){this.$Message.info({content:"file open success!",duration:5})}),null,!1):this.$Message.error({content:"file path can not be empty！",duration:5})},getRequestData:function(){var e=this.parentPath;return e||(e=this.model),{dialogType:this.dialogType,fileType:this.fileType,fileExt:this.fileExt,parentPath:e,changeCurPath:this.changeCurPath}}}},l=r,c=s("2877"),d=Object(c["a"])(l,i,n,!1,null,"29042d0b",null);t["a"]=d.exports},b816:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Select",{attrs:{clearable:e.clearable,multiple:e.multiple,disabled:e.disabled,size:e.size,filterable:e.filterable,transfer:e.transfer},on:{"on-change":e.updateValue},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},e._l(e.dictItems,(function(t){return s("Option",{key:t.itemKey,attrs:{value:t.itemKey}},[e._v(e._s(t.itemName))])})),1)},n=[],a=(s("ac6a"),s("c5f6"),s("e6fd")),o=s("5fcb"),r=s("c46f"),l={name:"DictSelect",props:{value:{type:[Array,String,Number,Boolean],default:""},exclusions:{type:[Object,Array],required:!1},number:{type:Boolean,default:!1},filterable:{type:Boolean,default:!1},kind:{type:String,default:""},pid:{type:String,default:""},clearable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},transfer:{type:Boolean,default:!1},labelText:{type:Boolean,default:!1},localDictItems:{type:Array,default:null},size:{type:String,default:"default"}},data:function(){return{model:Object(o["f"])(this.value),dictItems:[]}},mounted:function(){this.refresh()},watch:{value:function(){var e=Object(o["f"])(this.value);r.isArray(e)?r.isArray(this.model)?0!==r.difference(e,this.model).length&&(this.model=e):this.model=e:e!==this.model&&(this.model=e)},exclusions:function(){this.refresh()}},methods:{exclusionsHandle:function(){if(this.exclusions&&this.exclusions.length>0&&this.dictItems&&this.dictItems.length>0){var e={};this.exclusions.forEach((function(t){e["val_"+t]="1"}));var t=[];this.dictItems.forEach((function(s){"1"!==e["val_"+s.itemKey]&&t.push(s)})),this.dictItems=t}},updateValue:function(){var e=this.model;if(this.number&&(e=Object(o["e"])(e)),this.$emit("input",e),this.$emit("on-change",e),this.labelText){var t="";this.dictItems.forEach((function(s){s.k===e&&(t=s.v)})),this.$emit("on-text",{value:e,label:t}),this.$emit("on-change",{value:e})}},refresh:function(){var e=this;if(null!==this.localDictItems&&this.localDictItems.length>0)e.loadDict(this.localDictItems);else if(null!==this.kind&&""!==this.kind){var t=this.kind;if(""!==this.pid&&(t=this.kind+"_"+this.pid),null!==this.$store&&void 0!==this.$store){var s=this.$store.dispatch(a["a"].types.LOAD_DICT_INFO,{kind:t});s.then((function(t){e.loadDict(t)}))}}},loadDict:function(e){this.dictItems=e,this.exclusionsHandle()}}},c=l,d=s("2877"),u=Object(d["a"])(c,i,n,!1,null,null,null);t["a"]=u.exports},cd71:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Form",{ref:"formItems",attrs:{model:e.formItems,rules:e.formRules,"label-width":120,inline:""}},[s("Card",[s("p",{attrs:{slot:"title"},slot:"title"},[s("Icon",{attrs:{type:"md-folder"}}),e._v("\n        smartSegment工程批量处理工具\n      ")],1),s("Row",[s("Col",{attrs:{span:"24"}},[s("Form-item",{staticStyle:{width:"95%"},attrs:{label:"说明"}},[e._v("\n            用于进行智能化工程内文件处理；\n          ")])],1)],1),s("Row",[s("Col",{attrs:{span:"24"}},[s("Form-item",{staticStyle:{width:"95%"},attrs:{label:"源文件路径",prop:"srcPath"}},[s("file-chooser",{attrs:{disabled:e.disableInput,dialogType:"directory"},model:{value:e.formItems.srcPath,callback:function(t){e.$set(e.formItems,"srcPath",t)},expression:"formItems.srcPath"}})],1)],1)],1),s("Row",[s("Col",{attrs:{span:"24"}},[s("Form-item",{staticStyle:{width:"95%"},attrs:{label:"groovy接口脚本",prop:"segmentScriptPath"}},[s("file-chooser",{attrs:{disabled:e.disableInput,dialogType:"open",fileExt:"*.gsp"},model:{value:e.formItems.segmentScriptPath,callback:function(t){e.$set(e.formItems,"segmentScriptPath",t)},expression:"formItems.segmentScriptPath"}})],1)],1)],1),s("Row",[s("Col",{attrs:{span:"24"}},[s("Form-item",{staticStyle:{width:"95%"},attrs:{label:"处理白名单",prop:"whiteListExp"}},[s("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},disabled:e.disableInput},model:{value:e.formItems.whiteListExp,callback:function(t){e.$set(e.formItems,"whiteListExp",t)},expression:"formItems.whiteListExp"}})],1)],1)],1),s("Row",[s("Col",{attrs:{span:"24"}},[s("Form-item",{staticStyle:{width:"95%"},attrs:{label:"忽略处理表达式（不处理）",prop:"ignoreExp"}},[s("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},disabled:e.disableInput},model:{value:e.formItems.ignoreExp,callback:function(t){e.$set(e.formItems,"ignoreExp",t)},expression:"formItems.ignoreExp"}})],1)],1)],1),s("Row",[s("Col",{attrs:{span:"24"}},[s("Form-item",{staticStyle:{width:"95%"},attrs:{label:"json扩展配置",prop:"jsonConfig"}},[s("Input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:5}},model:{value:e.formItems.jsonConfig,callback:function(t){e.$set(e.formItems,"jsonConfig",t)},expression:"formItems.jsonConfig"}})],1)],1)],1),s("FormItem",[s("Button",{attrs:{type:"info",loading:e.loading},on:{click:e.save}},[s("Icon",{attrs:{type:"md-document"}}),e._v("\n          保存配置信息\n        ")],1),s("Button",{attrs:{type:"primary",loading:e.loading},on:{click:e.execute}},[s("Icon",{attrs:{type:"md-checkmark"}}),e._v("\n          执行处理\n        ")],1)],1),s("Row",[s("Col",{attrs:{span:"24"}},[s("Form-item",{staticStyle:{width:"95%"},attrs:{label:"执行结果"}},[s("log-console",{ref:"logConsole",attrs:{sid:e.sid}})],1)],1)],1)],1)],1)],1)},n=[],a=s("e6fd"),o=s("b816"),r=s("09ae"),l=s("6477"),c=s("86b0"),d=s("e6e8"),u=s("c46f"),m={srcPath:[{type:"string",required:!0,message:"原路径不能为空",trigger:"blur"}],whiteListExp:[{type:"string",required:!0,message:"白名单",trigger:"blur"}],ignoreExp:[{type:"string",required:!1,message:"忽略表达式",trigger:"blur"}],throwExp:[{type:"string",required:!1,message:"丢弃表达式",trigger:"blur"}],jsonConfig:[{type:"string",required:!1,message:"json配置信息",trigger:"blur"}],segmentScriptPath:[{type:"string",required:!0,message:"脚本路径不能为空",trigger:"blur"}]},p={srcPath:"",whiteListExp:"",ignoreExp:"target, .iml, .svn, node_modules, .git",throwExp:"",jsonConfig:"",segmentScriptPath:""},f={name:"smartSegment",props:{bindId:{type:String,default:"smartSegmentConfig"}},data:function(){return{formItems:u.clone(p),formRules:m,constants:a["a"],disableInput:!1,loading:!1,message:"",sid:"sid_"+(new Date).getTime()}},mounted:function(){var e=this,t=this.$store.dispatch(a["a"].types.GET_BIND_RESOURCE,{bindId:this.bindId});t.then((function(t){u.isEmpty(t)||(e.formItems=t)}))},methods:{save:function(){var e=this;this.$refs["formItems"].validate((function(t){if(!t)return!1;var s={bindId:e.bindId,configMap:e.formItems,_vue:e},i=e.$store.dispatch(a["a"].types.SAVE_BIND_RESOURCE,s);i.then((function(t){e.$Message.success({content:"保存配置信息成功",duration:5})}))}))},execute:function(){var e=this,t=this;t.$refs.logConsole.connectServer(),this.$refs["formItems"].validate((function(s){if(!s)return e.$Message.error({content:"参数有误，请检查...",duration:5}),!1;var i=c["a"].serializeObject(u.clone(t.formItems),!0,!0);i["sid"]=t.sid,e.connectLogServer(),c["a"].postSubmit(e,a["a"].urls.autoCode.smartSegment.execute,i,(function(e){this.$Message.success({content:"执行智能片段处理成功",duration:5}),this.message=e["message"]}),(function(e){this.message=e["message"]}),!0)}))},connectLogServer:function(){this.$refs.logConsole.connectServer()}},components:{dictSelect:o["a"],fileChooser:r["a"],logConsole:d["a"],dictRadio:l["a"]}},h=f,g=s("2877"),b=Object(g["a"])(h,i,n,!1,null,null,null);t["default"]=b.exports},e2ee:function(e,t,s){},e6e8:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Button",{on:{click:e.clearMessage}},[s("Icon",{attrs:{type:"md-trash"}}),e._v("\n    清空日志信息\n  ")],1),s("div",{staticStyle:{height:"450px","overflow-y":"scroll",background:"#333",color:"#aaa",padding:"10px"}},e._l(e.messageList,(function(t){return s("pre",{staticClass:"message_item_pre"},[e._v(e._s(t))])})),0)],1)},n=[],a=(s("c46f"),{name:"log-console",props:{sid:{type:String,default:""}},data:function(){return{messageList:[],webSocket:null}},mounted:function(){this.connectServer()},methods:{connectServer:function(){var e=this,t=this.webSocket;if(null===t||2===t.readyState||3===t.readyState){if(null===this.sid||""===this.sid)return void e.appendMessage("sid is null ,can not connect to server");var s=window.location.host;t=new WebSocket("ws://"+s+"/websocket/"+this.sid),t.onopen=function(t){e.appendMessage("log connection connected")},t.onmessage=function(t){e.appendMessage(t.data)},t.onclose=function(){e.appendMessage("log connection has been closed")},this.webSocket=t}},appendMessage:function(e){this.messageList.push(e)},clearMessage:function(){this.messageList=[]}},beforeDestroy:function(){null!==this.webSocket&&1===this.webSocket.readyState&&(this.webSocket.close(),this.webSocket=null)}}),o=a,r=(s("07fb"),s("2877")),l=Object(r["a"])(o,i,n,!1,null,"3d1c6bb0",null);t["a"]=l.exports}}]);