(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0665bc12"],{"07fb":function(t,e,o){"use strict";o("e2ee")},"09ae":function(t,e,o){"use strict";var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("Input",{attrs:{disabled:t.disabled},on:{"on-change":t.updateValue},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},[o("Button",{directives:[{name:"show",rawName:"v-show",value:"headless"!=t.windowName,expression:"windowName!='headless'"}],attrs:{slot:"append",icon:"ios-search",type:"primary",disabled:t.disabled},on:{click:t.fileChooser},slot:"append"},[t._v("选择\n  ")]),o("Button",{directives:[{name:"show",rawName:"v-show",value:"headless"!=t.windowName,expression:"windowName!='headless'"}],attrs:{slot:"append",icon:"document"},on:{click:t.openFile},slot:"append"},[t._v("open")])],1)],1)},a=[],i=o("e6fd"),n=o("86b0"),r={name:"fileChooser",props:{value:{type:String,default:""},dialogType:{type:String,default:"open"},fileType:{type:String,default:"all"},fileExt:{type:String,default:""},disabled:{type:Boolean,default:!1},changeCurPath:{type:String,default:""},parentPath:{type:String,default:""}},data:function(){return{model:this.value,windowName:this.$store.state.autoCode.profile["browserWindowName"]}},watch:{value:function(t,e){this.model=t}},methods:{updateValue:function(){var t=this.model;this.$emit("input",t)},fileChooser:function(){n["a"].postSubmit(this,i["a"].urls.common.file.fileChooser,this.getRequestData(),(function(t){null!==t.value&&""!==t.value&&(this.model=t.value,this.updateValue())}),null,!1);var t=this.$store.state.autoCode.profile["browserWindowName"];"swing"===t&&this.$Message.warning({content:"文件在swing窗口中打开，请切换界面进行文件选择！",duration:5})},openFile:function(){var t=this.getRequestData();t["editFilePath"]=this.model,""!==t["editFilePath"]?n["a"].postSubmit(this,i["a"].urls.common.file.openFile,t,(function(t){this.$Message.info({content:"file open success!",duration:5})}),null,!1):this.$Message.error({content:"file path can not be empty！",duration:5})},getRequestData:function(){var t=this.parentPath;return t||(t=this.model),{dialogType:this.dialogType,fileType:this.fileType,fileExt:this.fileExt,parentPath:t,changeCurPath:this.changeCurPath}}}},l=r,c=o("2877"),m=Object(c["a"])(l,s,a,!1,null,"29042d0b",null);e["a"]=m.exports},3293:function(t,e,o){"use strict";var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("Button",{attrs:{type:"info",size:"small"},on:{click:t.clear}},[o("Icon",{attrs:{type:"ios-close-outline"}}),t._v("\n    清空记录\n  ")],1),t._v("  \n\n  "),o("Row",[o("Table",{attrs:{columns:t.columns,data:t.resultList,size:"small",border:!0}})],1)],1)},a=[],i=o("5fcb"),n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[t.showButton?o("Button",{attrs:{type:"info",size:"small"},on:{click:function(e){return t.show(!0)}}},[t._v("\n    代码预览\n  ")]):t._e(),t._v("  \n\n  "),o("Modal",{attrs:{title:t.title,width:"94%"},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[0==t.templateResultList.length?o("div",[t._v("\n      没有文件列表，无法预览！\n    ")]):t._e(),t.templateResultList.length>0?o("Form",{attrs:{"label-width":120,inline:""}},[o("Row",[o("Form-item",{staticStyle:{width:"98%"},attrs:{label:"文件列表"}},[o("RadioGroup",{attrs:{type:"button"},model:{value:t.templateId,callback:function(e){t.templateId=e},expression:"templateId"}},[t._l(t.templateResultList,(function(e){return[o("Radio",{key:e.id,attrs:{label:e.id}},[t._v(t._s(e.name))])]}))],2)],1)],1),o("Row",[o("Col",{attrs:{span:"24"}},[o("Form-item",{staticStyle:{width:"90%"},attrs:{label:"文件信息",prop:"relativePath"}},[o("Tag",[t._v("模板id:")]),t._v("\n            "+t._s(t.templateId)+"     \n            "),o("Tag",[t._v("相对路径:")]),t._v("\n            "+t._s(t.formItems.relativePath)+"\n          ")],1)],1)],1),o("Row",[o("Col",{attrs:{span:"24"}},[o("Form-item",{staticStyle:{width:"96%"},attrs:{label:"输出内容",prop:"code"}},[o("div",{staticStyle:{height:"450px","overflow-y":"scroll",background:"#1f1f1f",color:"#f0f0f0"}},[o("pre",{ref:"codeRef",staticClass:"code_pre"},[t._v(t._s(t.formItems.code))])])])],1)],1)],1):t._e(),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("Button",{attrs:{type:"primary",loading:t.loading},on:{click:t.selectAll}},[t._v("\n        内容全选\n      ")]),o("Button",{directives:[{name:"clipboard",rawName:"v-clipboard",value:t.clipOptions,expression:"clipOptions"}],attrs:{type:"primary",loading:t.loading,icon:"md-copy"}},[t._v("\n        复制选择代码\n      ")]),o("Button",{attrs:{type:"default",loading:t.loading},on:{click:function(e){return t.show(!1)}}},[t._v("\n        关闭\n      ")])],1)],1)],1)},r=[],l=(o("7514"),o("e6fd")),c=o("86b0"),m=o("c46f"),p={name:"codePreview",props:{showButton:{type:Boolean,required:!1,default:!1},item:{type:Object,required:!0}},computed:{templateResultList:function(){return this.item["templateResultList"]?this.item["templateResultList"]:[]},clipOptions:function(){var t=this;return{value:this.formItems.code,success:function(e){t.$Message.success("复制成功")},error:function(){t.$Message.error("复制失败")}}}},watch:{templateId:function(t,e){this.templateResultChange(t)}},data:function(){return{templateId:null,loading:!1,showModal:!1,title:"代码预览",formItems:{relativePath:"",code:""}}},methods:{show:function(t){this.showModal=t},templateResultChange:function(t){var e=m.find(this.templateResultList,(function(e){return e.id===t}));if(null!==e&&void 0!==e)if(this.formItems.relativePath=e.relativePath,null===e["renderedContent"]||void 0===e["renderedContent"]){this.formItems.code="数据加载中...请稍候!";var o={projectKey:this.item["projectKey"],outputDir:this.item["outputDir"],relativePath:this.formItems.relativePath};c["a"].postSubmit(this,l["a"].urls.common.file.loadProjectOutputFile,o,(function(t){e["renderedContent"]=t["value"],this.formItems.code=e["renderedContent"]}),null,!0)}else this.formItems.code=e["renderedContent"]},selectAll:function(){var t=this.$refs["codeRef"];window.getSelection().removeAllRanges();var e=window.getSelection(),o=document.createRange();o.selectNode(t),e.addRange(o)}}},d=p,u=(o("f3e3"),o("2877")),h=Object(u["a"])(d,n,r,!1,null,"39ff7bc5",null),f=h.exports,v=(o("c46f"),{data:function(){return{resultList:[],columns:[{title:"时间",key:"startTime",width:160,render:function(t,e){return t("div",i["b"](e.row.startTime))}},{title:"耗时(ms)",key:"costTime",width:160},{title:"文件(复制到浏览器 or 点击下载)",key:"zipUrl",render:function(t,e){return t("a",{attrs:{href:e.row.zipUrl,target:"_blank"}},[e.row.zipUrl])}},{title:"操作",width:150,render:function(t,e){return t(f,{props:{showButton:!0,item:e.row}})}}]}},methods:{clear:function(){this.resultList=[]},appendResultInfo:function(t){this.resultList.push(t)}},components:{codePreview:f}}),b=v,g=Object(u["a"])(b,s,a,!1,null,"913a0000",null);e["a"]=g.exports},"6c58":function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("Form",{ref:"formItems",attrs:{model:t.formItems,rules:t.formRules,"label-width":120,inline:""}},[o("Card",[o("p",{attrs:{slot:"title"},slot:"title"},[o("Icon",{attrs:{type:"md-folder"}}),t._v("\n        目录配置\n      ")],1),o("Row",[o("Col",{attrs:{span:"24"}},[o("Form-item",{staticStyle:{width:"95%"},attrs:{label:"说明"}},[t._v("\n            用于进行基础工程全路径替换，可同时替换内容和文件目录。\n            可以称为盗版神器，如将 apache官方工具包转换为自己公司工程：\n            "),o("br"),t._v("\n            内容表达式：com.apache.hello=com.mycompany.myproject;\n            目录表达式：com/apache/hello=com/mycompany/myproject\n            "),o("br"),t._v("\n            主要用于将dummy（呆子）工程的一键转换为新开发工程；\n\n            "),o("br"),o("b",[t._v("请勿将源目录和输出目录设置为有任何包含关系，否则容易出现递归和文件混乱。")]),o("br"),t._v("\n            分为内容表达式 & 目录转换表达式, 请使用英文逗号区分多个表达式；\n            如："),o("br"),t._v("\n            忽略表达式：只复制，不替换，但是只针对当前文件名和内容，不针对子文件。\n            "),o("br"),t._v("\n            丢弃表达式： target, *.iml, .svn, node_modules, .git 建议使用以上值，将工作目录内容丢弃；\n          ")])],1)],1),o("Row",[o("Col",{attrs:{span:"24"}},[o("Form-item",{staticStyle:{width:"95%"},attrs:{label:"工程类型",prop:"templateType"}},[o("dict-radio",{attrs:{disabled:t.disableInput,kind:this.constants.dicts.dictKinds.TEMPLATE_TYPE_DICT},model:{value:t.formItems.templateType,callback:function(e){t.$set(t.formItems,"templateType",e)},expression:"formItems.templateType"}})],1)],1)],1),o("Row",{directives:[{name:"show",rawName:"v-show",value:"local"==t.formItems.templateType,expression:"formItems.templateType=='local'"}]},[o("Col",{attrs:{span:"24"}},[o("Form-item",{staticStyle:{width:"95%"},attrs:{label:"源文件路径",prop:"srcPath"}},[o("file-chooser",{attrs:{disabled:t.disableInput,dialogType:"directory"},model:{value:t.formItems.srcPath,callback:function(e){t.$set(t.formItems,"srcPath",e)},expression:"formItems.srcPath"}})],1)],1)],1),o("div",{directives:[{name:"show",rawName:"v-show",value:"git"==t.formItems.templateType,expression:"formItems.templateType=='git'"}],attrs:{STYLE:"margin-bottom: 20px"}},[o("Form-item",{staticStyle:{width:"95%"},attrs:{label:"git url",prop:"gitUrl"}},[o("Input",{attrs:{maxlength:200,disabled:t.disableInput},model:{value:t.formItems.gitUrl,callback:function(e){t.$set(t.formItems,"gitUrl",e)},expression:"formItems.gitUrl"}},[o("Button",{attrs:{slot:"append",icon:"ios-search"},on:{click:t.repoChoose},slot:"append"},[t._v("选择")])],1),o("git-repo-list",{ref:"gitRepoList",attrs:{repoName:"baseProjectRepo",showButton:!1},on:{itemChoose:t.chooseGitRepo}})],1),o("Form-item",{staticStyle:{width:"50%"},attrs:{label:"branchName",prop:"branchName"}},[o("Input",{attrs:{maxlength:200,disabled:t.disableInput},model:{value:t.formItems.branchName,callback:function(e){t.$set(t.formItems,"branchName",e)},expression:"formItems.branchName"}}),o("Button",{attrs:{type:"info",loading:t.loading},on:{click:t.fetchGitRepo}},[o("Icon",{attrs:{type:"md-arrow-down"}}),t._v("\n            拉取git仓库\n          ")],1)],1),o("Collapse",{attrs:{simple:""}},[o("Panel",{attrs:{name:"1"}},[t._v("\n            git鉴权&other\n            "),o("p",{attrs:{slot:"content"},slot:"content"},[o("Form-item",{staticStyle:{width:"50%"},attrs:{label:"用户名",prop:"userName"}},[o("Input",{attrs:{maxlength:200,disabled:t.disableInput},model:{value:t.formItems.userName,callback:function(e){t.$set(t.formItems,"userName",e)},expression:"formItems.userName"}})],1),o("Form-item",{staticStyle:{width:"50%"},attrs:{label:"密码",prop:"password"}},[o("Input",{attrs:{maxlength:200,type:"password",disabled:t.disableInput},model:{value:t.formItems.password,callback:function(e){t.$set(t.formItems,"password",e)},expression:"formItems.password"}})],1)],1)])],1)],1),o("Row",[o("Col",{attrs:{span:"24"}},[o("Form-item",{staticStyle:{width:"95%"},attrs:{label:"忽略处理表达式，只复制不替换",prop:"ignoreExp"}},[o("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},disabled:t.disableInput},model:{value:t.formItems.ignoreExp,callback:function(e){t.$set(t.formItems,"ignoreExp",e)},expression:"formItems.ignoreExp"}})],1)],1)],1),o("Row",[o("Col",{attrs:{span:"24"}},[o("Form-item",{staticStyle:{width:"95%"},attrs:{label:"丢弃表达式，不复制丢弃",prop:"throwExp"}},[o("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},disabled:t.disableInput},model:{value:t.formItems.throwExp,callback:function(e){t.$set(t.formItems,"throwExp",e)},expression:"formItems.throwExp"}})],1)],1)],1)],1),o("Card",[o("p",{attrs:{slot:"title"},slot:"title"},[o("Icon",{attrs:{type:"md-car"}}),t._v("\n        表达式 & 执行\n      ")],1),o("Row",[o("Col",{attrs:{span:"24"}},[o("Form-item",{staticStyle:{width:"95%"},attrs:{label:"说明"}},[t._v("\n            功能说明：因为目前文件统一使用UTF-8格式，如果非UTF-8文件可能出现乱码，请注意！"),o("br"),t._v("\n            替换表达式: 可以对目录名称和文本内容进行替换，如 oldName=newName 将会将所有包含oldName字符串的文件夹名称和文本内容全部替换为newName; "),o("br"),t._v("\n            目录转换表达式：\n            com/apache/hello=com/mycompany/group/myprj 延长目录；"),o("br"),t._v("\n            com/apache/hello=com/myprj 缩短目录；"),o("br"),t._v("\n            com/apache/hello=com/mycompany/myprj 等长更名等；\n          ")])],1)],1),o("Row",[o("Col",{attrs:{span:"24"}},[o("Form-item",{staticStyle:{width:"95%"},attrs:{label:"替换表达式",prop:"replaceExp"}},[o("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},disabled:t.disableInput},model:{value:t.formItems.replaceExp,callback:function(e){t.$set(t.formItems,"replaceExp",e)},expression:"formItems.replaceExp"}})],1)],1)],1),o("Row",[o("Col",{attrs:{span:"24"}},[o("Form-item",{staticStyle:{width:"95%"},attrs:{label:"目录转换表达式",prop:"dirReplaceExp"}},[o("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},disabled:t.disableInput},model:{value:t.formItems.dirReplaceExp,callback:function(e){t.$set(t.formItems,"dirReplaceExp",e)},expression:"formItems.dirReplaceExp"}})],1)],1)],1),o("Row",[o("Col",{attrs:{span:"24"}},[o("Form-item",{staticStyle:{width:"95%"},attrs:{label:"替换类型",prop:"replaceType"}},[o("dict-radio",{attrs:{disabled:t.disableInput,kind:this.constants.dicts.dictKinds.REPLACE_TYPE_DICT},model:{value:t.formItems.replaceType,callback:function(e){t.$set(t.formItems,"replaceType",e)},expression:"formItems.replaceType"}})],1)],1)],1),o("FormItem",[o("Button",{attrs:{type:"info",loading:t.loading},on:{click:t.save}},[o("Icon",{attrs:{type:"md-file"}}),t._v("\n          保存配置信息\n        ")],1),o("Button",{attrs:{type:"primary",loading:t.loading},on:{click:t.execute}},[o("Icon",{attrs:{type:"md-checkmark"}}),t._v("\n          执行替换\n        ")],1)],1),o("Row",[o("Col",{attrs:{span:"24"}},[o("Form-item",{staticStyle:{width:"100%"},attrs:{label:"执行结果文件"}},[o("result-info",{ref:"resultInfo"})],1)],1)],1),o("Row",[o("Col",{attrs:{span:"22"}},[o("log-console",{ref:"logConsole",attrs:{sid:t.sid}})],1)],1)],1)],1)],1)},a=[],i=(o("a481"),o("e6fd")),n=o("b816"),r=o("09ae"),l=o("6477"),c=o("86b0"),m=o("3293"),p=o("e6e8"),d=o("ff5b"),u=o("5fcb"),h=o("c46f"),f={srcPath:[{type:"string",required:!0,message:"原路径不能为空",trigger:"blur"}],gitUrl:[{type:"string",required:!0,message:"gitUrl不能为空",trigger:"blur"}],branchName:[{type:"string",required:!0,message:"branchName不能为空",trigger:"blur"}],ignoreExp:[{type:"string",required:!1,message:"原路径不能为空",trigger:"blur"}],throwExp:[{type:"string",required:!1,message:"原路径不能为空",trigger:"blur"}],replaceType:[{type:"string",required:!0,message:"替换类型不能为空",trigger:"blur"}]},v={srcPath:"",templateType:"git",gitUrl:"",branchName:"master",userName:"",password:"",ignoreExp:"",throwExp:"",replaceExp:"",dirReplaceExp:"",replaceType:""},b={name:"replace",props:{bindId:{type:String,default:"autoCodeReplaceUtil"}},data:function(){return{formItems:h.clone(v),formRules:f,constants:i["a"],disableInput:!1,loading:!1,message:"",sid:"sid_"+(new Date).getTime()}},watch:{"formItems.templateType":function(t){this._templateTypeChange(t)}},mounted:function(){var t=this,e=this,o=this.$store.dispatch(i["a"].types.GET_BIND_RESOURCE,{bindId:this.bindId});o.then((function(o){h.isEmpty(o)||(o["branchName"]||(o["branchName"]="master"),o["templateType"]||(o["templateType"]="git"),e.formItems=o),t._templateTypeChange()}))},methods:{save:function(){var t=this;this.$refs["formItems"].validate((function(e){if(!e)return!1;var o={bindId:t.bindId,configMap:t.formItems,_vue:t},s=t.$store.dispatch(i["a"].types.SAVE_BIND_RESOURCE,o);s.then((function(e){t.$Message.success({content:"保存配置信息成功",duration:5})}))}))},execute:function(){var t=this;this.$refs["formItems"].validate((function(e){if(!e)return t.$Message.error({content:"参数有误，请检查...",duration:5}),!1;var o=h.clone(t.formItems);o["sid"]=t.sid;var s=c["a"].serializeObject(o,!0,!0);t.connectLogServer(),c["a"].postSubmit(t,i["a"].urls.autoCode.replace.execute,s,(function(t){this.$Message.success({content:"执行成功",duration:5}),this.appendResultInfo(t)}),null,!0)}))},fetchGitRepo:function(){if(u["c"](this.formItems.gitUrl)||u["c"](this.formItems.branchName))return this.$Message.error({content:"参数验证失败，请检验参数",duration:5}),!1;var t={gitUrl:this.formItems.gitUrl,branchName:this.formItems.branchName,userName:this.formItems.userName,password:this.formItems.password};c["a"].postSubmit(this,i["a"].urls.repo.git.fetchRepo,t,(function(t){this.$Message.success({content:"拉取仓库地址信息成功，耗时(s)："+t["costTime"],duration:5})}),null,!0)},_templateTypeChange:function(t){t||(t=this.formItems.templateType);var e="git"===t;this.formRules.gitUrl[0].required=e,this.formRules.branchName[0].required=e,this.formRules.srcPath[0].required=!e},appendResultInfo:function(t){var e=t["zipFileName"];if(null!==e&&""!==e){var o=window.location.host,s=window.location.protocol+"//"+o+"/zip/sampleProject/"+e,a={zipUrl:s,startTime:t["startTime"],costTime:t["costTime"]};this.$refs.resultInfo.appendResultInfo(a)}},chooseGitRepo:function(t){if(this.formItems.gitUrl=t.gitUrl,this.formItems.branchName=t.branchName,t["extConfig"]){var e=t["extConfig"];e["ignoreExp"]&&(this.formItems.ignoreExp=e["ignoreExp"]),e["throwExp"]&&(this.formItems.throwExp=e["throwExp"]),e["replaceExp"]&&(this.formItems.replaceExp=e["replaceExp"]),e["dirReplaceExp"]&&(this.formItems.dirReplaceExp=e["dirReplaceExp"])}},repoChoose:function(){this.$refs.gitRepoList.open()},connectLogServer:function(){this.$refs.logConsole.connectServer()}},components:{dictSelect:n["a"],fileChooser:r["a"],dictRadio:l["a"],resultInfo:m["a"],logConsole:p["a"],gitRepoList:d["a"]}},g=b,w=o("2877"),y=Object(w["a"])(g,s,a,!1,null,null,null);e["default"]=y.exports},b816:function(t,e,o){"use strict";var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("Select",{attrs:{clearable:t.clearable,multiple:t.multiple,disabled:t.disabled,size:t.size,filterable:t.filterable,transfer:t.transfer},on:{"on-change":t.updateValue},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},t._l(t.dictItems,(function(e){return o("Option",{key:e.itemKey,attrs:{value:e.itemKey}},[t._v(t._s(e.itemName))])})),1)},a=[],i=(o("ac6a"),o("c5f6"),o("e6fd")),n=o("5fcb"),r=o("c46f"),l={name:"DictSelect",props:{value:{type:[Array,String,Number,Boolean],default:""},exclusions:{type:[Object,Array],required:!1},number:{type:Boolean,default:!1},filterable:{type:Boolean,default:!1},kind:{type:String,default:""},pid:{type:String,default:""},clearable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},transfer:{type:Boolean,default:!1},labelText:{type:Boolean,default:!1},localDictItems:{type:Array,default:null},size:{type:String,default:"default"}},data:function(){return{model:Object(n["f"])(this.value),dictItems:[]}},mounted:function(){this.refresh()},watch:{value:function(){var t=Object(n["f"])(this.value);r.isArray(t)?r.isArray(this.model)?0!==r.difference(t,this.model).length&&(this.model=t):this.model=t:t!==this.model&&(this.model=t)},exclusions:function(){this.refresh()}},methods:{exclusionsHandle:function(){if(this.exclusions&&this.exclusions.length>0&&this.dictItems&&this.dictItems.length>0){var t={};this.exclusions.forEach((function(e){t["val_"+e]="1"}));var e=[];this.dictItems.forEach((function(o){"1"!==t["val_"+o.itemKey]&&e.push(o)})),this.dictItems=e}},updateValue:function(){var t=this.model;if(this.number&&(t=Object(n["e"])(t)),this.$emit("input",t),this.$emit("on-change",t),this.labelText){var e="";this.dictItems.forEach((function(o){o.k===t&&(e=o.v)})),this.$emit("on-text",{value:t,label:e}),this.$emit("on-change",{value:t})}},refresh:function(){var t=this;if(null!==this.localDictItems&&this.localDictItems.length>0)t.loadDict(this.localDictItems);else if(null!==this.kind&&""!==this.kind){var e=this.kind;if(""!==this.pid&&(e=this.kind+"_"+this.pid),null!==this.$store&&void 0!==this.$store){var o=this.$store.dispatch(i["a"].types.LOAD_DICT_INFO,{kind:e});o.then((function(e){t.loadDict(e)}))}}},loadDict:function(t){this.dictItems=t,this.exclusionsHandle()}}},c=l,m=o("2877"),p=Object(m["a"])(c,s,a,!1,null,null,null);e["a"]=p.exports},d99c:function(t,e,o){},e2ee:function(t,e,o){},e6e8:function(t,e,o){"use strict";var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("Button",{on:{click:t.clearMessage}},[o("Icon",{attrs:{type:"md-trash"}}),t._v("\n    清空日志信息\n  ")],1),o("div",{staticStyle:{height:"450px","overflow-y":"scroll",background:"#333",color:"#aaa",padding:"10px"}},t._l(t.messageList,(function(e){return o("pre",{staticClass:"message_item_pre"},[t._v(t._s(e))])})),0)],1)},a=[],i=(o("c46f"),{name:"log-console",props:{sid:{type:String,default:""}},data:function(){return{messageList:[],webSocket:null}},mounted:function(){this.connectServer()},methods:{connectServer:function(){var t=this,e=this.webSocket;if(null===e||2===e.readyState||3===e.readyState){if(null===this.sid||""===this.sid)return void t.appendMessage("sid is null ,can not connect to server");var o=window.location.host;e=new WebSocket("ws://"+o+"/websocket/"+this.sid),e.onopen=function(e){t.appendMessage("log connection connected")},e.onmessage=function(e){t.appendMessage(e.data)},e.onclose=function(){t.appendMessage("log connection has been closed")},this.webSocket=e}},appendMessage:function(t){this.messageList.push(t)},clearMessage:function(){this.messageList=[]}},beforeDestroy:function(){null!==this.webSocket&&1===this.webSocket.readyState&&(this.webSocket.close(),this.webSocket=null)}}),n=i,r=(o("07fb"),o("2877")),l=Object(r["a"])(n,s,a,!1,null,"3d1c6bb0",null);e["a"]=l.exports},f3e3:function(t,e,o){"use strict";o("d99c")},ff5b:function(t,e,o){"use strict";var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("Button",{directives:[{name:"show",rawName:"v-show",value:t.showButton,expression:"showButton"}],attrs:{type:"info"},on:{click:function(e){return t.open()}}},[o("Icon",{attrs:{type:"ios-play"}}),t._v("\n    选择仓库\n  ")],1),o("Modal",{attrs:{title:"git仓库信息",width:"85%"},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[o("Table",{attrs:{columns:t.columns,data:t.repoInfo.repos,size:"small",border:!0}}),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("Button",{attrs:{type:"info",loading:t.loading},on:{click:function(e){return t.loadRepo(!0)}}},[o("Icon",{attrs:{type:"md-refresh"}}),t._v("\n        刷新\n      ")],1)],1)],1)],1)},a=[],i=o("e6fd"),n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("Button",{attrs:{type:"primary",size:"small"},on:{click:t.choose}},[o("Icon",{attrs:{type:"md-checkmark"}}),t._v("\n    选择\n  ")],1),o("Button",{attrs:{type:"info",size:"small"},on:{click:t.description}},[t._v("\n    详情\n  ")]),o("Modal",{attrs:{title:"git仓库信息",width:"600"},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[o("Form",{attrs:{"label-width":120,inline:""}},[o("Row",[o("Col",{attrs:{span:"24"}},[o("Form-item",{attrs:{label:"title",prop:"title"}},[t._v("\n            "+t._s(t.item.title)+"\n          ")])],1)],1),o("Row",[o("Col",{attrs:{span:"24"}},[o("Form-item",{attrs:{label:"gitUrl",prop:"gitUrl"}},[t._v("\n            "+t._s(t.item.gitUrl)+"\n          ")])],1)],1),o("Row",[o("Col",{attrs:{span:"24"}},[o("Form-item",{attrs:{label:"branchName",prop:"branchName"}},[t._v("\n            "+t._s(t.item.branchName)+"\n          ")])],1)],1),o("Row",[o("Col",{attrs:{span:"24"}},[o("Form-item",{attrs:{label:"作者",prop:"author"}},[t._v("\n            "+t._s(t.item.author)+"\n          ")])],1)],1),o("Row",[o("Col",{attrs:{span:"24"}},[o("Form-item",{attrs:{label:"主页",prop:"homePage"}},[o("a",{attrs:{href:t.item.homePage,target:"_blank"}},[t._v(t._s(t.item.homePage))])])],1)],1),o("Row",{directives:[{name:"show",rawName:"v-show",value:t.item.templateRelativePath,expression:"item.templateRelativePath"}]},[o("Col",{attrs:{span:"24"}},[o("Form-item",{attrs:{label:"模板相对路径",prop:"templateRelativePath"}},[t._v("\n            "+t._s(t.item.templateRelativePath)+"\n          ")])],1)],1)],1)],1)],1)},r=[],l={props:{item:{type:Object,required:!0}},data:function(){return{showModal:!1}},methods:{choose:function(){this.$emit(i["a"].actions.common.itemChoose,this.item)},description:function(){this.showModal=!0}}},c=l,m=o("2877"),p=Object(m["a"])(c,n,r,!1,null,null,null),d=p.exports,u={name:"gitRepoList",props:{repoName:{type:String,required:!0},showButton:{type:Boolean,required:!1,default:!0}},data:function(){var t=this;return{showModal:!1,loading:!1,repoInfo:{repos:[]},columns:[{title:"gitUrl",key:"gitUrl"},{title:"branchName",key:"branchName"},{title:"名称",key:"title"},{title:"模板相对路径",key:"templateRelativePath"},{title:"操作",key:"action",width:130,align:"center",render:function(e,o){return e(d,{props:{item:o.row},on:{itemChoose:function(e){t.itemChoose(e)}}})}}]}},mounted:function(){this.loadRepo(!1)},methods:{open:function(){this.showModal=!0},loadRepo:function(t){var e=this,o=i["a"].types.LOAD_REPO_BASE_PROJECT;"templateRepo"===this.repoName&&(o=i["a"].types.LOAD_REPO_TEMPLATE);var s=this.$store.dispatch(o,{_vue:this,refresh:t});s.then((function(t){e.repoInfo=t}))},itemChoose:function(t){this.showModal=!1,this.$emit(i["a"].actions.common.itemChoose,t)}},components:{operate:d}},h=u,f=Object(m["a"])(h,s,a,!1,null,"3680e126",null);e["a"]=f.exports}}]);