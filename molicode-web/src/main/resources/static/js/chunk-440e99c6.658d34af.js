(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-440e99c6"],{"07fb":function(e,t,o){"use strict";o("e2ee")},"09ae":function(e,t,o){"use strict";var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("Input",{attrs:{disabled:e.disabled},on:{"on-change":e.updateValue},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},[o("Button",{directives:[{name:"show",rawName:"v-show",value:"headless"!=e.windowName,expression:"windowName!='headless'"}],attrs:{slot:"append",icon:"ios-search",type:"primary",disabled:e.disabled},on:{click:e.fileChooser},slot:"append"},[e._v("选择\n  ")]),o("Button",{directives:[{name:"show",rawName:"v-show",value:"headless"!=e.windowName,expression:"windowName!='headless'"}],attrs:{slot:"append",icon:"document"},on:{click:e.openFile},slot:"append"},[e._v("open")])],1)],1)},a=[],n=o("e6fd"),i=o("86b0"),l={name:"fileChooser",props:{value:{type:String,default:""},dialogType:{type:String,default:"open"},fileType:{type:String,default:"all"},fileExt:{type:String,default:""},disabled:{type:Boolean,default:!1},changeCurPath:{type:String,default:""},parentPath:{type:String,default:""}},data:function(){return{model:this.value,windowName:this.$store.state.autoCode.profile["browserWindowName"]}},watch:{value:function(e,t){this.model=e}},methods:{updateValue:function(){var e=this.model;this.$emit("input",e)},fileChooser:function(){i["a"].postSubmit(this,n["a"].urls.common.file.fileChooser,this.getRequestData(),(function(e){null!==e.value&&""!==e.value&&(this.model=e.value,this.updateValue())}),null,!1);var e=this.$store.state.autoCode.profile["browserWindowName"];"swing"===e&&this.$Message.warning({content:"文件在swing窗口中打开，请切换界面进行文件选择！",duration:5})},openFile:function(){var e=this.getRequestData();e["editFilePath"]=this.model,""!==e["editFilePath"]?i["a"].postSubmit(this,n["a"].urls.common.file.openFile,e,(function(e){this.$Message.info({content:"file open success!",duration:5})}),null,!1):this.$Message.error({content:"file path can not be empty！",duration:5})},getRequestData:function(){var e=this.parentPath;return e||(e=this.model),{dialogType:this.dialogType,fileType:this.fileType,fileExt:this.fileExt,parentPath:e,changeCurPath:this.changeCurPath}}}},r=l,c=o("2877"),u=Object(c["a"])(r,s,a,!1,null,"29042d0b",null);t["a"]=u.exports},"5f7e":function(e,t,o){"use strict";o.r(t);var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{directives:[{name:"show",rawName:"v-show",value:!e.hasDefaultProject,expression:"!hasDefaultProject"}]},[o("Alert",{attrs:{type:"warning","show-icon":""}},[e._v("\n      警告\n      "),o("template",{slot:"desc"},[o("span",{staticStyle:{"font-size":"13px","font-weight":"normal"}},[e._v("\n                    您尚未设置默认项目配置信息，将无法使用自动代码功能,请先创建项目并设置默认项目信息。\n                  ")])])],2)],1),o("div",{directives:[{name:"show",rawName:"v-show",value:e.hasDefaultProject,expression:"hasDefaultProject"}],staticStyle:{background:"#eee",padding:"10px"}},[o("Card",[o("p",{attrs:{slot:"title"},slot:"title"},[o("Icon",{attrs:{type:"md-play"}}),e._v("\n        代码生成\n      ")],1),o("coder")],1)],1)])},a=[],n=o("e6fd"),i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("Form",{ref:"formItems",attrs:{model:e.formItems,rules:e.formRules,"label-width":120,inline:""}},[o("Row",[o("Col",{attrs:{span:"24"}},[o("Form-item",{staticStyle:{width:"95%"},attrs:{label:"代码输出方式",prop:"outputType"}},[o("dict-radio",{attrs:{disabled:e.disableInput,kind:this.constants.dicts.dictKinds.OUTPUT_TYPE_DICT},model:{value:e.formItems.outputType,callback:function(t){e.$set(e.formItems,"outputType",t)},expression:"formItems.outputType"}})],1)],1),o("Col",{directives:[{name:"show",rawName:"v-show",value:"1"===e.formItems.outputType,expression:"formItems.outputType ==='1'"}],attrs:{span:"24"}},[o("Form-item",{staticStyle:{width:"96%"},attrs:{label:"代码输出目录",prop:"projectOutputDir"}},[o("file-chooser",{attrs:{disabled:!0,dialogType:"directory"},model:{value:e.formItems.projectOutputDir,callback:function(t){e.$set(e.formItems,"projectOutputDir",t)},expression:"formItems.projectOutputDir"}})],1)],1)],1),o("Row",[o("Col",{attrs:{span:"24"}},[o("Form-item",{staticStyle:{width:"96%"},attrs:{label:"模板类型"}},[o("dict-radio",{attrs:{disabled:!0,kind:this.constants.dicts.dictKinds.TEMPLATE_TYPE_DICT},model:{value:e.pathConfig.templateType,callback:function(t){e.$set(e.pathConfig,"templateType",t)},expression:"pathConfig.templateType"}}),o("auto-make-info",{directives:[{name:"show",rawName:"v-show",value:"maven"==e.pathConfig.templateType,expression:"pathConfig.templateType == 'maven'"}]})],1)],1)],1),o("Row",{directives:[{name:"show",rawName:"v-show",value:"local"==e.pathConfig.templateType,expression:"pathConfig.templateType == 'local'"}]},[o("Col",{attrs:{span:"24"}},[o("Form-item",{staticStyle:{width:"96%"},attrs:{label:"模板根目录",prop:"templateBaseDir"}},[o("file-chooser",{attrs:{disabled:!0,changeCurPath:"1",dialogType:"directory"},model:{value:e.formItems.templateBaseDir,callback:function(t){e.$set(e.formItems,"templateBaseDir",t)},expression:"formItems.templateBaseDir"}})],1)],1)],1),o("Row",[o("Col",{attrs:{span:"24"}},[o("Form-item",{staticStyle:{width:"100%"},attrs:{label:"模板列表"}},[o("template-list",{ref:"templateList",attrs:{sid:e.formItems.sid},on:{fetchTemplateList:e.connectLogServer}})],1)],1)],1),o("Row",[o("Col",{attrs:{span:"24"}},[o("Form-item",{staticStyle:{width:"96%"},attrs:{label:"数据模型类型"}},[o("dict-radio",{attrs:{disabled:!1,kind:this.constants.dicts.dictKinds.DATA_MODEL_TYPE_DICT},model:{value:e.formItems.dataModelType,callback:function(t){e.$set(e.formItems,"dataModelType",t)},expression:"formItems.dataModelType"}})],1)],1)],1),o("Row",[o("Col",{attrs:{span:"24"}},[o("Form-item",{staticStyle:{width:"96%"},attrs:{label:"输入源类型"}},[o("dict-radio",{attrs:{disabled:!1,kind:this.constants.dicts.dictKinds.RESOURCE_TYPE_DICT},model:{value:e.formItems.resourceType,callback:function(t){e.$set(e.formItems,"resourceType",t)},expression:"formItems.resourceType"}})],1)],1)],1),o("Row",{directives:[{name:"show",rawName:"v-show",value:"file"==e.resourceType,expression:"resourceType == 'file'"}]},[o("Col",{attrs:{span:"24"}},[o("Form-item",{staticStyle:{width:"96%"},attrs:{label:"数据源文件路径",prop:"tableModelPath"}},[o("file-chooser",{attrs:{disabled:e.disableInput,dialogType:"open",fileExt:"*.xml",parentPath:e.formItems.tableModelDir},model:{value:e.formItems.tableModelPath,callback:function(t){e.$set(e.formItems,"tableModelPath",t)},expression:"formItems.tableModelPath"}})],1)],1)],1),o("Row",{directives:[{name:"show",rawName:"v-show",value:"front"==e.resourceType,expression:"resourceType == 'front'"}]},[o("Col",{attrs:{span:"24"}},[o("Form-item",{staticStyle:{width:"96%"},attrs:{label:"前台源内容（用于数据处理）",prop:"frontContent"}},[o("Input",{attrs:{type:"textarea",autosize:{minRows:10,maxRows:10}},model:{value:e.formItems.frontContent,callback:function(t){e.$set(e.formItems,"frontContent",t)},expression:"formItems.frontContent"}})],1)],1)],1),o("Row",{directives:[{name:"show",rawName:"v-show",value:"headless"!=e.windowName&&"1"===e.formItems.outputType,expression:"windowName != 'headless' && formItems.outputType ==='1'"}]},[o("Col",{attrs:{span:"24"}},[o("Form-item",{staticStyle:{width:"96%"},attrs:{label:"是否覆盖文件",prop:"overrideFlag"}},[o("dict-radio",{attrs:{disabled:e.disableInput,kind:this.constants.dicts.dictKinds.STD_BOOLEAN_DICT},model:{value:e.formItems.overrideFlag,callback:function(t){e.$set(e.formItems,"overrideFlag",t)},expression:"formItems.overrideFlag"}})],1)],1)],1),o("FormItem",{directives:[{name:"show",rawName:"v-show",value:"database"!==e.resourceType,expression:"resourceType !== 'database'"}]},[o("Button",{attrs:{type:"primary",loading:e.loading},on:{click:e.execute}},[o("Icon",{attrs:{type:"md-play"}}),e._v("\n        生成代码\n      ")],1)],1),o("Row",{directives:[{name:"show",rawName:"v-show",value:"database"==e.resourceType,expression:"resourceType == 'database'"}]},[o("Col",{attrs:{span:"24"}},[o("tableModelJson",{on:{genCode:e.genCode}})],1)],1),o("Row",{directives:[{name:"show",rawName:"v-show",value:"headless"==e.windowName||"2"===e.formItems.outputType,expression:"windowName == 'headless' || formItems.outputType ==='2'"}]},[o("Col",{attrs:{span:"24"}},[o("Form-item",{staticStyle:{width:"100%"},attrs:{label:"执行结果文件"}},[o("result-info",{ref:"resultInfo"})],1)],1)],1),o("Row",[o("Col",{attrs:{span:"22"}},[o("log-console",{ref:"logConsole",attrs:{sid:e.formItems.sid}})],1)],1)],1)],1)},l=[],r=o("6477"),c=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("i-switch",{on:{"on-change":e.chooserAllChange},model:{value:e.chooserAll,callback:function(t){e.chooserAll=t},expression:"chooserAll"}}),e._v("\n  全选\n\n    \n  "),o("Button",{attrs:{loading:e.loading,size:"small"},on:{click:e.fetchTemplateList}},[o("Icon",{attrs:{type:"md-refresh"}}),e._v("\n    刷新模板列表\n  ")],1),e._v("  \n\n\n  "),o("CheckboxGroup",{model:{value:e.templateCheckedIdList,callback:function(t){e.templateCheckedIdList=t},expression:"templateCheckedIdList"}},[e._l(e.templateList,(function(t){return[o("Col",{attrs:{span:"6"}},[o("Checkbox",{attrs:{label:t.id}},[e._v(e._s(t.name))]),o("Button",{attrs:{size:"small",type:"default"},on:{click:function(o){return e.about(t)}}},[e._v("?")])],1)]}))],2),o("template-info",{ref:"templateInfo"})],1)},u=[],d=o("6736"),m=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("Modal",{attrs:{title:"模板信息","mask-closable":!1,width:"780"},on:{"on-ok":e.close},model:{value:e.showModal,callback:function(t){e.showModal=t},expression:"showModal"}},[o("Form",{attrs:{"label-width":120,inline:""}},[o("Row",[o("Col",{attrs:{span:"24"}},[o("Form-item",{staticStyle:{width:"90%"},attrs:{label:"模板ID:",prop:"id"}},[e._v("\n            "+e._s(e.template.id)+"\n          ")])],1)],1),o("Row",[o("Col",{attrs:{span:"24"}},[o("Form-item",{staticStyle:{width:"90%"},attrs:{label:"模板名称:",prop:"name"}},[e._v("\n            "+e._s(e.template.name)+"\n          ")])],1)],1),o("Row",[o("Col",{attrs:{span:"24"}},[o("Form-item",{staticStyle:{width:"90%"},attrs:{label:"描述信息:",prop:"desc"}},[e._v("\n            "+e._s(e.template.desc)+"\n          ")])],1)],1),o("Row",[o("Col",{attrs:{span:"24"}},[o("Form-item",{staticStyle:{width:"90%"},attrs:{label:"支持的数据模型:",prop:"acceptDataModel"}},[e._v("\n            "+e._s(e.template.acceptDataModel)+"\n          ")])],1)],1),o("Row",[o("Col",{attrs:{span:"24"}},[o("Form-item",{staticStyle:{width:"90%"},attrs:{label:"模板目录:",prop:"templateFile"}},[e._v("\n            "+e._s(e.template.templateFile)+"\n          ")])],1)],1),o("Row",[o("Col",{attrs:{span:"24"}},[o("Form-item",{staticStyle:{width:"90%"},attrs:{label:"输出目录:",prop:"destFile"}},[e._v("\n            "+e._s(e.template.destFile)+"\n          ")])],1)],1),o("Row",[o("Col",{attrs:{span:"24"}},[o("Form-item",{staticStyle:{width:"90%"},attrs:{label:"模板引擎:",prop:"engine"}},[e._v("\n            "+e._s(e.template.engine)+"\n          ")])],1)],1)],1)],1)],1)},p=[],f={name:"TemplateInfo",data:function(){return{showModal:!1,template:{}}},methods:{close:function(){this.showModal=!1},show:function(e){this.showModal=!0,this.template=e}}},h=f,b=o("2877"),v=Object(b["a"])(h,m,p,!1,null,"eafc9a64",null),g=v.exports,y=(o("c46f"),{props:{flushMaven:{type:String,default:"2"},sid:{type:String,default:""}},data:function(){return{templateList:[],templateCheckedIdList:[],chooserAll:!0,loading:!1}},computed:{storeAutoXmlPath:function(){return this.$store.getters.getConfigObjectVal(n["a"].bizKeys.configs.pathConfig.configKey,n["a"].bizKeys.configs.pathConfig.autoXmlPath)}},watch:{storeAutoXmlPath:function(e){this.fetchTemplateList()}},mounted:function(){this.storeAutoXmlPath&&this.fetchTemplateList()},methods:{chooserAllChange:function(e){if(e){for(var t=[],o=0;o<this.templateList.length;o++)t.push(this.templateList[o].id);this.templateCheckedIdList=t}else this.templateCheckedIdList=[]},fetchTemplateList:function(){var e=this.$store.state.autoCode.defaultProjectConfig,t=d["a"](e,n["a"].bizKeys.configs.pathConfig.configKey),o={autoXmlPath:t[n["a"].bizKeys.configs.pathConfig.autoXmlPath],templateBaseDir:t[n["a"].bizKeys.configs.pathConfig.templateBaseDir],projectKey:this.$store.state.autoCode.defaultProjectKey,flushMaven:this.flushMaven,sid:this.sid};if(o.templateBaseDir||"local"!==t["templateType"])if(o.projectKey){var s=this,a=this.$store.dispatch(n["a"].types.LOAD_AUTOMAKE_DEF_PRJ,{_vue:s,sid:s.sid,flushMaven:this.flushMaven});a.then((function(e){e&&(s.templateList=e.templates,s.chooserAllChange(s.chooserAll))})).catch((function(e){var t=e["message"];t&&""!==t||(t="处理异常，请联系管理员！"),s.$Message.error({content:t,duration:10})})),this.$emit("fetchTemplateList")}else this.$Message.error({content:"默认项目还未设置",duration:5});else this.$Message.error({content:"模板基础目录尚未配置",duration:5})},getChoosedTemplateIds:function(){return this.templateCheckedIdList},about:function(e){this.$refs["templateInfo"].show(e)}},components:{templateInfo:g}}),w=y,C=Object(b["a"])(w,c,u,!1,null,"1985efc3",null),M=C.exports,I=o("86b0"),T=o("09ae"),_=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("Button",{on:{click:e.clearMessage}},[o("Icon",{attrs:{type:"md-trash"}}),e._v("\n    清空日志信息\n  ")],1),o("div",{staticStyle:{height:"450px","overflow-y":"scroll",background:"#333",color:"#aaa",padding:"10px"}},e._l(e.messageList,(function(t){return o("pre",{staticClass:"message_item_pre"},[e._v(e._s(t))])})),0)],1)},k=[],x=(o("c46f"),{name:"log-console",props:{sid:{type:String,default:""}},data:function(){return{messageList:[],webSocket:null}},mounted:function(){this.connectServer()},methods:{connectServer:function(){var e=this,t=this.webSocket;if(null===t||2===t.readyState||3===t.readyState){if(null===this.sid||""===this.sid)return void e.appendMessage("sid is null ,can not connect to server");var o=window.location.host;t=new WebSocket("ws://"+o+"/websocket/"+this.sid),t.onopen=function(t){e.appendMessage("log connection connected")},t.onmessage=function(t){e.appendMessage(t.data)},t.onclose=function(){e.appendMessage("log connection has been closed")},this.webSocket=t}},appendMessage:function(e){this.messageList.push(e)},clearMessage:function(){this.messageList=[]}},beforeDestroy:function(){null!==this.webSocket&&1===this.webSocket.readyState&&(this.webSocket.close(),this.webSocket=null)}}),R=x,S=(o("07fb"),Object(b["a"])(R,_,k,!1,null,"3d1c6bb0",null)),$=S.exports,D=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("Button",{attrs:{size:"small",type:"default"},on:{click:function(t){return e.show()}}},[e._v("？关于模板工程")]),o("Modal",{attrs:{title:"模板工程信息",width:"780","mask-closable":!1},on:{"on-ok":e.close},model:{value:e.showModal,callback:function(t){e.showModal=t},expression:"showModal"}},[null!=e.autoMake?o("Form",{attrs:{"label-width":120,inline:""}},[o("Row",[o("Col",{attrs:{span:"24"}},[o("Form-item",{staticStyle:{width:"90%"},attrs:{label:"引擎版本:",prop:"moliCodeVersion"}},[e._v("\n            "+e._s(e.autoMake.moliCodeVersion)+"\n          ")])],1)],1),o("Row",[o("Col",{attrs:{span:"24"}},[o("Form-item",{staticStyle:{width:"90%"},attrs:{label:"groupId:",prop:"groupId"}},[e._v("\n            "+e._s(e.mavenResource.groupId)+"\n          ")])],1)],1),o("Row",[o("Col",{attrs:{span:"24"}},[o("Form-item",{staticStyle:{width:"90%"},attrs:{label:"artifactId:",prop:"artifactId"}},[e._v("\n            "+e._s(e.mavenResource.artifactId)+"\n          ")])],1)],1),o("Row",[o("Col",{attrs:{span:"24"}},[o("Form-item",{staticStyle:{width:"90%"},attrs:{label:"version:",prop:"version"}},[e._v("\n            "+e._s(e.mavenResource.version)+"\n          ")])],1)],1),o("Row",{directives:[{name:"show",rawName:"v-show",value:null!=e.mavenResource.name,expression:"mavenResource.name != null"}]},[o("Col",{attrs:{span:"24"}},[o("Form-item",{staticStyle:{width:"90%"},attrs:{label:"name:",prop:"name"}},[e._v("\n            "+e._s(e.mavenResource.name)+"\n          ")])],1)],1),o("Row",{directives:[{name:"show",rawName:"v-show",value:null!=e.mavenResource.description,expression:"mavenResource.description != null"}]},[o("Col",{attrs:{span:"24"}},[o("Form-item",{staticStyle:{width:"90%"},attrs:{label:"description:",prop:"description"}},[o("p",{staticStyle:{"word-break":"break-all"}},[e._v("\n              "+e._s(e.mavenResource.description)+"\n            ")])])],1)],1),o("Row",{directives:[{name:"show",rawName:"v-show",value:null!=e.mavenResource.developersJson,expression:"mavenResource.developersJson != null"}]},[o("Col",{attrs:{span:"24"}},[o("Form-item",{staticStyle:{width:"90%"},attrs:{label:"developers:",prop:"developersJson"}},[o("p",{staticStyle:{"word-break":"break-all"}},[e._v("\n              "+e._s(e.mavenResource.developersJson)+"\n            ")])])],1)],1),o("Row",{directives:[{name:"show",rawName:"v-show",value:null!=e.mavenResource.url,expression:"mavenResource.url != null"}]},[o("Col",{attrs:{span:"24"}},[o("Form-item",{staticStyle:{width:"90%"},attrs:{label:"url:",prop:"url"}},[e._v("\n            "+e._s(e.mavenResource.url)+"\n          ")])],1)],1),o("Row",{directives:[{name:"show",rawName:"v-show",value:null!=e.mavenResource.inceptionYear,expression:"mavenResource.inceptionYear != null"}]},[o("Col",{attrs:{span:"24"}},[o("Form-item",{staticStyle:{width:"90%"},attrs:{label:"inceptionYear:",prop:"inceptionYear"}},[e._v("\n            "+e._s(e.mavenResource.inceptionYear)+"\n          ")])],1)],1)],1):e._e(),null==e.autoMake?o("Alert",{attrs:{type:"warning"}},[e._v("请先拉取模板列表再查看！")]):e._e()],1)],1)},P=[],j={name:"autoMakeInfo",data:function(){return{showModal:!1,autoMake:null,mavenResource:{}}},computed:{defAutoMake:function(){return this.$store.state.autoCode.autoMake}},watch:{defAutoMake:function(e){this.autoMake=e,null===e["mavenResourceVo"]?this.mavenResource={}:this.mavenResource=e.mavenResourceVo}},methods:{close:function(){this.showModal=!1},show:function(){this.showModal=!0}}},L=j,O=Object(b["a"])(L,D,P,!1,null,"220260c2",null),N=O.exports,F=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("Form",{ref:"formItems",attrs:{model:e.formItems,rules:e.formRules,"label-width":120,inline:""}},[o("div",[o("Row",[o("Col",{attrs:{span:"24"}},[o("Form-item",{staticStyle:{width:"100%"},attrs:{label:"数据库Table列表"}},[o("table-list",{ref:"tableList",on:{genCode:e.genCode}})],1)],1)],1)],1)])],1)},K=[],B=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("Button",{attrs:{type:"info",size:"small"},on:{click:e.fetchTableList}},[o("Icon",{attrs:{type:"md-arrow-down"}}),e._v("\n    获取Table列表\n  ")],1),e._v("  \n\n  "),o("Button",{attrs:{type:"info",size:"small"},on:{click:e.openCreateSql}},[e._v("\n    CREATE SQL转换\n  ")]),e._v("  \n\n  "),o("create-sql",{ref:"createSql",on:{sqlTableListNotify:e.sqlTableListNotify}}),o("Row",[o("Table",{attrs:{columns:e.columns,data:e.tableList,size:"small",border:!0,"no-data-text":"请确认配置并获取table列表"}})],1)],1)},z=[],q=(o("7514"),function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("edit",{ref:"editModal",attrs:{item:e.item},on:{genCode:e.genCode,tableModelNotify:e.tableModelNotify}}),o("Button",{attrs:{type:"primary",size:"small"},on:{click:e.edit}},[o("Icon",{attrs:{type:"md-paper"}}),e._v("\n    配置生成代码\n  ")],1)],1)}),E=[],A=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("Modal",{attrs:{title:e.title,"ok-text":"> 执行代码生成","mask-closable":!1,width:"94%"},on:{"on-cancel":e.cancel},model:{value:e.showModal,callback:function(t){e.showModal=t},expression:"showModal"}},[o("Form",{attrs:{"label-width":120,inline:""}},[o("Row",[o("Col",{attrs:{span:"8"}},[o("Form-item",{staticStyle:{width:"90%"},attrs:{label:"className(类名)",prop:"id"}},[o("Input",{model:{value:e.tableDefine.id,callback:function(t){e.$set(e.tableDefine,"id",t)},expression:"tableDefine.id"}})],1)],1),o("Col",{attrs:{span:"8"}},[o("Form-item",{staticStyle:{width:"90%"},attrs:{label:"中文名称",prop:"cnname"}},[o("Input",{model:{value:e.tableDefine.cnname,callback:function(t){e.$set(e.tableDefine,"cnname",t)},expression:"tableDefine.cnname"}})],1)],1),o("Col",{attrs:{span:"8"}},[o("Form-item",{staticStyle:{width:"90%"},attrs:{label:"表自定义扩展",prop:"customProps"}},[e.showTableCusProps?o("custom-props",{attrs:{customPropsObject:e.tableModel["customProps"]},on:{"on-change":e.tableCustomPropsChange}}):e._e()],1)],1)],1)],1),o("Table",{attrs:{columns:e.columns,data:e.tableDefine.columns,size:"small",border:!0}}),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("Button",{attrs:{type:"default",loading:e.loading},on:{click:e.cancel}},[e._v("\n      取消\n    ")]),o("Button",{attrs:{type:"info",loading:e.loading},on:{click:function(t){return e.saveModelAndGenCode(!1)}}},[o("Icon",{attrs:{type:"md-checkmark"}}),e._v("\n      保存表模型\n    ")],1),o("Button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.saveModelAndGenCode(!0)}}},[o("Icon",{attrs:{type:"md-play"}}),e._v("\n      执行代码生成\n    ")],1)],1)],1)},V=[],J=(o("28a5"),o("b816")),G=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("Button",{attrs:{type:e.editType,size:"small"},on:{click:e.show}},[e._v("\n    "+e._s(e.editText)+"\n  ")]),o("Modal",{attrs:{title:e.title,"mask-closable":!1,width:"80%"},on:{"on-cancel":e.cancel},model:{value:e.showModal,callback:function(t){e.showModal=t},expression:"showModal"}},[o("Form",{attrs:{"label-width":120,inline:""}},[o("Row",[o("Col",{attrs:{span:"24"}},[o("Form-item",{staticStyle:{width:"90%"},attrs:{label:"扩展json",prop:"customPropsText"}},[o("Input",{attrs:{type:"textarea",autosize:{minRows:10,maxRows:10}},model:{value:e.customPropsText,callback:function(t){e.customPropsText=t},expression:"customPropsText"}})],1)],1)],1)],1),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("Button",{attrs:{type:"default"},on:{click:e.cancel}},[e._v("\n        取消\n      ")]),o("Button",{attrs:{type:"primary"},on:{click:e.save}},[o("Icon",{attrs:{type:"md-checkmark"}}),e._v("\n        保存\n      ")],1)],1)],1)],1)},Y=[],U=o("c46f"),X={name:"customProps",props:{customPropsObject:{type:Object,required:!1}},data:function(){var e=this.customPropsObject;null!==e&&void 0!==e||(e={});var t="修改";U.isEmpty(e)&&(t="新增");var o=JSON.stringify(e,null,2);return{title:"修改customProps属性",showModal:!1,customPropsText:o,editText:t,customPropsObjectParam:e,editType:"info"}},methods:{show:function(){this.showModal=!0},cancel:function(){this.showModal=!1},save:function(){var e=null;try{e=JSON.parse(this.customPropsText)}catch(t){return void this.$Message.error({content:"配置json数据有问题，请检查！",duration:5})}this.propsChange(e),this.customPropsObjectParam=e,this.$emit("on-change",e),this.showModal=!1},propsChange:function(e){U.isEmpty(e)?(this.editText="新增",this.editType="info"):(this.editText="修改",this.editType="primary",this.customPropsText=JSON.stringify(e,null,2))}}},Q=X,W=Object(b["a"])(Q,G,Y,!1,null,"32a15924",null),H=W.exports,Z=o("c46f");function ee(e){return"in_"+e}function te(e,t,o){var s=e.tableDefine,a=[{title:"列名",key:"columnName",width:120},{title:"注释",key:"comment",width:150},{title:"类型",key:"columnType",width:100},{title:"最大长度",key:"length",width:80},{title:"是否主键",key:"isPK",width:80,render:function(e,t){return e("i-switch",{props:{value:t.row["isPK"],size:"small"},on:{"on-change":function(e){s.columns[t.index]["isPK"]=e}}})}},{title:"显示名称",key:"cnname",width:170,render:function(e,t){return e("i-input",{props:{value:t.row["cnname"],size:"small"},on:{"on-blur":function(e){s.columns[t.index]["cnname"]=e.target.value}}})}},{title:"控件",key:"jspTag",width:160,render:function(e,t){return e(J["a"],{props:{value:t.row["jspTag"],kind:n["a"].dicts.dictKinds.STD_JSP_TAG,size:"small"},on:{"on-change":function(e){s.columns[t.index]["jspTag"]=e}}})}},{title:"必填",key:"canBeNull",width:55,render:function(e,t){return e("i-switch",{props:{value:!1===t.row["canBeNull"],size:"small"},on:{"on-change":function(e){s.columns[t.index]["canBeNull"]=!e}}})}}];return t&&t.length>0&&Z.each(t,(function(e){if(e["configShow"]){var t=ee(e["groupKey"]);a.push({title:e.desc,key:t,width:80,render:function(e,o){return e("i-switch",{props:{value:o.row[t],size:"small"},on:{"on-change":function(e){s.columns[o.index][t]=e}}})}})}})),a.push({title:"customProps",width:120,render:function(e,t){return e(H,{props:{customPropsObject:t.row["customProps"],size:"small"},on:{"on-change":function(e){s.columns[t.index]["customProps"]=e}}})}}),a}var oe={props:{item:{type:Object,required:!0}},data:function(){return{loading:!1,loaded:!1,showModal:!1,showTableCusProps:!1,title:"编辑并生成代码",tableModel:{},customFieldGroupList:[],tableDefine:{columns:[]},columns:[]}},methods:{cancel:function(){this.showModal=!1},show:function(e){this.showModal=e,e&&!this.loaded&&(this.fetchTableModel(),this.showTableCusProps=!0)},fetchTableModel:function(){var e=this.$store.state.autoCode.defaultProjectKey;if(e){var t={projectKey:e,tableName:this.item.tableName,tableSourceName:this.item["sourceName"]};I["a"].postSubmit(this,n["a"].urls.autoCode.tableModel.getTableInfo,t,(function(e){se(e["value"],e["customFieldGroupList"]),this.tableModel=e["value"],this.customFieldGroupList=e["customFieldGroupList"],this.columns=te(this.tableModel,this.customFieldGroupList),this.tableDefine=this.tableModel.tableDefine,this.title="编辑生成代码，表（"+this.tableModel.tableDefine.dbTableName+")"}),null,!0)}else this.$Message.error({content:"默认项目尚未配置",duration:5})},saveModelAndGenCode:function(e){ae(this.tableModel,this.customFieldGroupList);var t=JSON.stringify(this.tableModel),o=this.$store.state.autoCode.defaultProjectKey,s={projectKey:o,tableModelJson:t,tableName:this.tableDefine.dbTableName};I["a"].postSubmit(this,n["a"].urls.autoCode.tableModel.saveTableModel,s,(function(t){e?(this.$emit(n["a"].actions.autoCode.genCode,t["value"]),this.show(!1)):(this.$Message.success({content:"保存表模型设计成功",duration:5}),this.$emit(n["a"].actions.autoCode.tableModelNotify,this.tableModel))}),null,!0)},tableCustomPropsChange:function(e){this.tableModel["customProps"]=e}},components:{dictSelect:J["a"],customProps:H}};function se(e,t){var o=e.tableDefine,s=e["bizFieldsMap"];null!==s&&void 0!==s&&Z.mapObject(s,(function(e,t){var s=e.split(","),a="in_"+t;return Z.each(o.columns,(function(e){e[a]=Z.contains(s,e["columnName"])})),""}))}function ae(e,t){var o=e.tableDefine;Z.each(t,(function(t){var s=t["groupKey"],a=ee(s),n=[];Z.each(o.columns,(function(e){e[a]&&n.push(e["columnName"])})),n.length>0&&(e["bizFieldsMap"][s]=n.join(","))}))}var ne=oe,ie=Object(b["a"])(ne,A,V,!1,null,null,null),le=ie.exports,re={props:{item:{type:Object,required:!0}},methods:{edit:function(){this.$refs.editModal.show(!0)},genCode:function(e){this.$emit(n["a"].actions.autoCode.genCode,e)},tableModelNotify:function(e){this.$emit(n["a"].actions.autoCode.tableModelNotify,e)}},components:{edit:le}},ce=re,ue=Object(b["a"])(ce,q,E,!1,null,null,null),de=ue.exports,me=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[e.showButton?o("Button",{attrs:{type:"info",size:"small"},on:{click:function(t){return e.show(!0)}}},[e._v("\n    CREATE SQL转换\n  ")]):e._e(),e._v("  \n\n  "),o("Modal",{attrs:{title:e.title,"mask-closable":!1,width:"94%"},model:{value:e.showModal,callback:function(t){e.showModal=t},expression:"showModal"}},[o("Form",{attrs:{"label-width":120,inline:""}},[o("Row",[o("Col",{attrs:{span:"24"}},[o("Form-item",{staticStyle:{width:"90%"},attrs:{label:"createSQL",prop:"sql"}},[o("Input",{attrs:{type:"textarea",placeholder:"请输入建表语句（目前仅MySQL支持）",autosize:{minRows:10,maxRows:10}},model:{value:e.formItems.sql,callback:function(t){e.$set(e.formItems,"sql",t)},expression:"formItems.sql"}})],1)],1)],1)],1),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("Button",{attrs:{type:"default",loading:e.loading},on:{click:function(t){return e.show(!1)}}},[e._v("\n        取消\n      ")]),o("Button",{attrs:{type:"primary",loading:e.loading},on:{click:e.execute}},[o("Icon",{attrs:{type:"md-play"}}),e._v("\n        分析转换CreateSQL\n      ")],1)],1)],1)],1)},pe=[],fe=(o("c46f"),{name:"createSql",props:{showButton:{type:Boolean,required:!1,default:!1}},data:function(){return{loading:!1,showModal:!1,title:"create sql转换",formItems:{sql:""}}},methods:{show:function(e){this.showModal=e,e||(this.formItems.sql="")},execute:function(){var e=this.$store.state.autoCode.defaultProjectKey;if(e){var t={projectKey:e,createSql:this.formItems.sql};I["a"].postSubmit(this,n["a"].urls.autoCode.tableModel.getTableListBySql,t,(function(e){e.value&&e.value.length>0?(this.$emit(n["a"].actions.autoCode.sqlTableListNotify,e.value),this.show(!1)):this.$Message.error({content:"解析SQL失败，请检查！",duration:5})}),null,!0)}else this.$Message.error({content:"默认项目尚未配置",duration:5})}}}),he=fe,be=Object(b["a"])(he,me,pe,!1,null,"24f2a898",null),ve=be.exports,ge=o("c46f"),ye={data:function(){var e=this;return{tableList:[],templateCheckboxList:[],chooserAll:!0,columns:[{title:"tableName",key:"tableName"},{title:"beanName",key:"id"},{title:"中文名称",key:"cnname"},{title:"操作",key:"action",width:250,align:"center",render:function(t,o){return t(de,{props:{item:o.row},on:{genCode:function(t){e.genCode(t)},tableModelNotify:function(t){e.tableModelNotify(t)}}})}}]}},components:{operate:de,createSql:ve},methods:{chooserAllChange:function(e){if(e){for(var t=[],o=0;o<this.tableList.length;o++)t.push(this.tableList[o].desc);this.templateCheckboxList=t}else this.templateCheckboxList=[]},fetchTableList:function(){var e=this.$store.state.autoCode.defaultProjectKey;if(e){var t={projectKey:e};I["a"].postSubmit(this,n["a"].urls.autoCode.tableModel.getTableList,t,(function(e){this.tableList=e["value"]}),null,!0)}else this.$Message.error({content:"默认项目尚未配置",duration:5})},getCheckedTableList:function(){return ge.filter(this.tableList,(function(e){return e.checked}))},genCode:function(e){this.$emit(n["a"].actions.autoCode.genCode,e)},tableModelNotify:function(e){var t=ge.find(this.tableList,(function(t){return t.tableName===e.tableDefine["dbTableName"]}));t&&(t.id=e.tableDefine.id,t.cnname=e.tableDefine.cnname)},openCreateSql:function(){this.$refs.createSql.show(!0)},sqlTableListNotify:function(e){this.tableList=e}}},we=ye,Ce=Object(b["a"])(we,B,z,!1,null,"b8720d80",null),Me=Ce.exports,Ie=o("c46f"),Te={tableModelDir:[{type:"string",required:!0,message:"tableModel存放目录不能为空",trigger:"blur"}],tableName:[{type:"string",required:!0,message:"表名不能为空",trigger:"blur"}],cnname:[{type:"string",required:!0,message:"中文名不能为空",trigger:"blur"}]},_e={name:"tableModel",data:function(){return{formItems:{tableModelDir:"",tableName:"",cnname:"",smartFlag:"1"},constants:n["a"],formRules:Te,disableInput:!1,showInputMode:!1,loading:!1}},components:{fileChooser:T["a"],dictRadio:r["a"],tableList:Me},mounted:function(){var e=this.$store.state.autoCode.defaultProjectConfig;this.formItems.tableModelDir=d["b"](e,n["a"].bizKeys.configs.pathConfig.configKey,n["a"].bizKeys.configs.pathConfig.tableModelDir)},computed:{storeTableModelDir:function(){return this.$store.getters.getConfigObjectVal(n["a"].bizKeys.configs.pathConfig.configKey,n["a"].bizKeys.configs.pathConfig.tableModelDir)}},watch:{storeTableModelDir:function(e){this.formItems.tableModelDir=e}},methods:{execute:function(){var e=this;this.$store.state.autoCode.defaultProjectKey?this.$refs["formItems"].validate((function(t){if(!t)return e.$Message.error({content:"参数有误，请检查...",duration:5}),!1;var o=I["a"].serializeObject(Ie.clone(e.formItems),!0,!0);o.projectKey=e.$store.state.autoCode.defaultProjectKey,e.makeTableModel(o)})):this.$Message.error({content:"还未设置默认项目，请先进行配置...",duration:5})},makeTableModel:function(e){I["a"].postSubmit(this,n["a"].urls.autoCode.tableModel.makeTableModel,e,(function(t){this.$Message.success({content:"生成tableModel成功, tableModel="+e["tableName"],duration:3})}),null,!0)},batchExecute:function(){var e=this.$refs.tableList.getCheckedTableList();if(Ie.isEmpty(e))this.$Message.error({content:"请先拉取数据库列表，并选择相应表进行执行...",duration:5});else if(""!==this.formItems.tableModelDir){var t=this.$store.state.autoCode.defaultProjectKey;if(t){var o=this;Ie.each(e,(function(e){var s=Ie.clone(e);s.projectKey=t,s.tableModelDir=o.formItems.tableModelDir,o.makeTableModel(s)}))}else this.$Message.error({content:"还未设置默认项目，请先进行配置...",duration:5})}else this.$Message.error({content:"请先选择tableModel存储目录",duration:5})},genCode:function(e){this.$emit(n["a"].actions.autoCode.genCode,e)}}},ke=_e,xe=Object(b["a"])(ke,F,K,!1,null,"0b8f0388",null),Re=xe.exports,Se=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("Button",{attrs:{type:"info",size:"small"},on:{click:e.clear}},[o("Icon",{attrs:{type:"ios-close-outline"}}),e._v("\n    清空记录\n  ")],1),e._v("  \n\n  "),o("Row",[o("Table",{attrs:{columns:e.columns,data:e.resultList,size:"small",border:!0}})],1)],1)},$e=[],De=o("5fcb"),Pe=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[e.showButton?o("Button",{attrs:{type:"info",size:"small"},on:{click:function(t){return e.show(!0)}}},[e._v("\n    代码预览\n  ")]):e._e(),e._v("  \n\n  "),o("Modal",{attrs:{title:e.title,width:"94%"},model:{value:e.showModal,callback:function(t){e.showModal=t},expression:"showModal"}},[0==e.templateResultList.length?o("div",[e._v("\n      没有文件列表，无法预览！\n    ")]):e._e(),e.templateResultList.length>0?o("Form",{attrs:{"label-width":120,inline:""}},[o("Row",[o("Form-item",{staticStyle:{width:"98%"},attrs:{label:"文件列表"}},[o("RadioGroup",{attrs:{type:"button"},model:{value:e.templateId,callback:function(t){e.templateId=t},expression:"templateId"}},[e._l(e.templateResultList,(function(t){return[o("Radio",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.name))])]}))],2)],1)],1),o("Row",[o("Col",{attrs:{span:"24"}},[o("Form-item",{staticStyle:{width:"90%"},attrs:{label:"文件信息",prop:"relativePath"}},[o("Tag",[e._v("模板id:")]),e._v("\n            "+e._s(e.templateId)+"     \n            "),o("Tag",[e._v("相对路径:")]),e._v("\n            "+e._s(e.formItems.relativePath)+"\n          ")],1)],1)],1),o("Row",[o("Col",{attrs:{span:"24"}},[o("Form-item",{staticStyle:{width:"96%"},attrs:{label:"输出内容",prop:"code"}},[o("div",{staticStyle:{height:"450px","overflow-y":"scroll",background:"#1f1f1f",color:"#f0f0f0"}},[o("pre",{ref:"codeRef",staticClass:"code_pre"},[e._v(e._s(e.formItems.code))])])])],1)],1)],1):e._e(),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("Button",{attrs:{type:"primary",loading:e.loading},on:{click:e.selectAll}},[e._v("\n        内容全选\n      ")]),o("Button",{directives:[{name:"clipboard",rawName:"v-clipboard",value:e.clipOptions,expression:"clipOptions"}],attrs:{type:"primary",loading:e.loading,icon:"md-copy"}},[e._v("\n        复制选择代码\n      ")]),o("Button",{attrs:{type:"default",loading:e.loading},on:{click:function(t){return e.show(!1)}}},[e._v("\n        关闭\n      ")])],1)],1)],1)},je=[],Le=o("c46f"),Oe={name:"codePreview",props:{showButton:{type:Boolean,required:!1,default:!1},item:{type:Object,required:!0}},computed:{templateResultList:function(){return this.item["templateResultList"]?this.item["templateResultList"]:[]},clipOptions:function(){var e=this;return{value:this.formItems.code,success:function(t){e.$Message.success("复制成功")},error:function(){e.$Message.error("复制失败")}}}},watch:{templateId:function(e,t){this.templateResultChange(e)}},data:function(){return{templateId:null,loading:!1,showModal:!1,title:"代码预览",formItems:{relativePath:"",code:""}}},methods:{show:function(e){this.showModal=e},templateResultChange:function(e){var t=Le.find(this.templateResultList,(function(t){return t.id===e}));if(null!==t&&void 0!==t)if(this.formItems.relativePath=t.relativePath,null===t["renderedContent"]||void 0===t["renderedContent"]){this.formItems.code="数据加载中...请稍候!";var o={projectKey:this.item["projectKey"],outputDir:this.item["outputDir"],relativePath:this.formItems.relativePath};I["a"].postSubmit(this,n["a"].urls.common.file.loadProjectOutputFile,o,(function(e){t["renderedContent"]=e["value"],this.formItems.code=t["renderedContent"]}),null,!0)}else this.formItems.code=t["renderedContent"]},selectAll:function(){var e=this.$refs["codeRef"];window.getSelection().removeAllRanges();var t=window.getSelection(),o=document.createRange();o.selectNode(e),t.addRange(o)}}},Ne=Oe,Fe=(o("f3e3"),Object(b["a"])(Ne,Pe,je,!1,null,"39ff7bc5",null)),Ke=Fe.exports,Be=(o("c46f"),{data:function(){return{resultList:[],columns:[{title:"时间",key:"startTime",width:160,render:function(e,t){return e("div",De["b"](t.row.startTime))}},{title:"耗时(ms)",key:"costTime",width:160},{title:"文件(复制到浏览器 or 点击下载)",key:"zipUrl",render:function(e,t){return e("a",{attrs:{href:t.row.zipUrl,target:"_blank"}},[t.row.zipUrl])}},{title:"操作",width:150,render:function(e,t){return e(Ke,{props:{showButton:!0,item:t.row}})}}]}},methods:{clear:function(){this.resultList=[]},appendResultInfo:function(e){this.resultList.push(e)}},components:{codePreview:Ke}}),ze=Be,qe=Object(b["a"])(ze,Se,$e,!1,null,"913a0000",null),Ee=qe.exports,Ae=o("c46f"),Ve={templateBaseDir:[{type:"string",required:!0,message:"autoXml路径不能为空",trigger:"blur"}],tableModelPath:[{type:"string",required:!0,message:"输入源文件存储路径不能为空",trigger:"blur"}],projectOutputDir:[{type:"string",required:!0,message:"代码输出目录不能为空",trigger:"blur"}],frontContent:[{type:"string",required:!1,message:"内容不能为空",trigger:"blur"}]},Je={name:"coder",data:function(){var e=this.$route.query["configType"],t={formItems:{outputType:"2",templateBaseDir:"",tableModelPath:"",projectOutputDir:"",overrideFlag:"false",tableModelDir:"",templateIds:"",dataModelType:"tableModel",resourceType:"database",frontContent:"",sid:"sid_"+(new Date).getTime()},formRules:Ve,disableInput:!1,loading:!1,constants:n["a"]};return"ump"===e&&(t.formItems.dataModelType="json",t.formItems.resourceType="front"),"headless"===t.windowName&&(Ve.projectOutputDir[0].required=!1,t.formItem.outputType="2"),t},components:{fileChooser:T["a"],dictRadio:r["a"],templateList:M,logConsole:$,autoMakeInfo:N,tableModelJson:Re,resultInfo:Ee},mounted:function(){var e=this.$store.state.autoCode.defaultProjectConfig,t=d["a"](e,n["a"].bizKeys.configs.pathConfig.configKey);this.formItems.templateBaseDir=t[n["a"].bizKeys.configs.pathConfig.templateBaseDir],this.formItems.projectOutputDir=t[n["a"].bizKeys.configs.pathConfig.projectOutputDir],this.formItems.tableModelDir=t[n["a"].bizKeys.configs.pathConfig.tableModelDir],this.formItems.outputType=t[n["a"].bizKeys.configs.pathConfig.outputType],this.formItems.outputType||(this.formItems.outputType="2"),this.formValidateChange(),this.loadBrowserPassContent();var o=this.$store.dispatch(n["a"].types.LOAD_SYSTEM_PROFILE,{_vue:this});o.then((function(e){}))},computed:{storeTemplateBaseDir:function(){return this.$store.getters.getConfigObjectVal(n["a"].bizKeys.configs.pathConfig.configKey,n["a"].bizKeys.configs.pathConfig.templateBaseDir)},storeProjectOutputDir:function(){return this.$store.getters.getConfigObjectVal(n["a"].bizKeys.configs.pathConfig.configKey,n["a"].bizKeys.configs.pathConfig.projectOutputDir)},storeTableModelDir:function(){return this.$store.getters.getConfigObjectVal(n["a"].bizKeys.configs.pathConfig.configKey,n["a"].bizKeys.configs.pathConfig.tableModelDir)},storeOutputType:function(){return this.$store.getters.getConfigObjectVal(n["a"].bizKeys.configs.pathConfig.configKey,n["a"].bizKeys.configs.pathConfig.outputType)},pathConfig:function(){return this.$store.getters.getConfigObject(n["a"].bizKeys.configs.pathConfig.configKey)},resourceType:function(){return this.formItems.resourceType},windowName:function(){return this.$store.state.autoCode.profile["browserWindowName"]}},watch:{storeTemplateBaseDir:function(e){this.formItems.templateBaseDir=e},storeProjectOutputDir:function(e){this.formItems.projectOutputDir=e},storeTableModelDir:function(e){this.formItems.tableModelDir=e},storeOutputType:function(e){e||(e="2"),this.formItems.outputType=e},resourceType:function(e){"file"===e?(this.formRules.tableModelPath[0].required=!0,this.formRules.frontContent[0].required=!1):"front"===e&&(this.formRules.tableModelPath[0].required=!1,this.formRules.frontContent[0].required=!0)},"formItems.outputType":function(e){this.formRules.projectOutputDir[0].required="1"===e}},methods:{execute:function(e){var t=this,o=this;if(this.$store.state.autoCode.defaultProjectKey){var s="local"===this.pathConfig.templateType;Ve.templateBaseDir[0].required=s,this.$refs["formItems"].validate((function(s){if(!s)return t.$Message.error({content:"参数有误，请检查...",duration:5}),!1;var a=t.$refs["templateList"].getChoosedTemplateIds();if(Ae.isEmpty(a))return t.$Message.error({content:"请先拉取模板列表，并选择要生成的代码模块",duration:5}),!1;t.formItems.templateIds=a.join(",");var i=I["a"].serializeObject(Ae.clone(t.formItems),!0,!0);i.projectKey=t.$store.state.autoCode.defaultProjectKey,o.$refs.logConsole.connectServer(),I["a"].postSubmit(t,n["a"].urls.autoCode.coder.execute,i,(function(t){this.$Message.success({content:"生成代码成功，请查看相关目录查看",duration:3}),this.appendResultInfo(t),e&&e.call(this,!0)}),(function(t){var s=t["message"];null!==s&&""!==s||(s="执行失败，原因未知，请查看运行日志"),o.$refs.logConsole.appendMessage(s),e&&e.call(this,!1)}),!0)}))}else this.$Message.error({content:"还未设置默认项目，请先进行配置...",duration:5})},appendResultInfo:function(e){var t=e["zipFileName"];if(null!==t&&""!==t){var o=this.$store.state.autoCode.defaultProjectKey,s=window.location.host,a=window.location.protocol+"//"+s+"/zip/"+o+"/"+t,n={zipUrl:a,startTime:e["startTime"],costTime:e["costTime"],outputDir:e["outputDir"],templateResultList:e["templateResultList"],projectKey:o};this.$refs.resultInfo.appendResultInfo(n)}},loadBrowserPassContent:function(){I["a"].postSubmit(this,n["a"].urls.sys.system.getProfileCache,{cacheKey:"browserPassKey"},(function(e){this.formItems.frontContent=e["value"]}),(function(e){}),!1)},clearMessage:function(){this.message=""},formValidateChange:function(){"file"===this.formItems.resourceType?(this.formRules.tableModelPath[0].required=!0,this.formRules.frontContent[0].required=!1):"front"===this.formItems.resourceType&&(this.formRules.tableModelPath[0].required=!1,this.formRules.frontContent[0].required=!0),this.formRules.projectOutputDir[0].required="1"===this.formItems.outputType},connectLogServer:function(){this.$refs.logConsole.connectServer()},genCode:function(e){null!==e&&""!==e?(this.formItems.tableModelPath=e,this.execute()):this.$Message.error({content:"请先选中表模型进行生成！",duration:5})}}},Ge=Je,Ye=Object(b["a"])(Ge,i,l,!1,null,"04d196e7",null),Ue=Ye.exports,Xe=(o("c46f"),{name:"autoCode",components:{coder:Ue},beforeMount:function(){this.$store.dispatch(n["a"].types.LOAD_DEFAULT_PROJECT,{loadConfig:!0})},computed:{hasDefaultProject:function(){return null!==this.$store.state.autoCode.defaultProjectKey}}}),Qe=Xe,We=Object(b["a"])(Qe,s,a,!1,null,"69a4e7e8",null);t["default"]=We.exports},b816:function(e,t,o){"use strict";var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("Select",{attrs:{clearable:e.clearable,multiple:e.multiple,disabled:e.disabled,size:e.size,filterable:e.filterable,transfer:e.transfer},on:{"on-change":e.updateValue},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},e._l(e.dictItems,(function(t){return o("Option",{key:t.itemKey,attrs:{value:t.itemKey}},[e._v(e._s(t.itemName))])})),1)},a=[],n=(o("ac6a"),o("c5f6"),o("e6fd")),i=o("5fcb"),l=o("c46f"),r={name:"DictSelect",props:{value:{type:[Array,String,Number,Boolean],default:""},exclusions:{type:[Object,Array],required:!1},number:{type:Boolean,default:!1},filterable:{type:Boolean,default:!1},kind:{type:String,default:""},pid:{type:String,default:""},clearable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},transfer:{type:Boolean,default:!1},labelText:{type:Boolean,default:!1},localDictItems:{type:Array,default:null},size:{type:String,default:"default"}},data:function(){return{model:Object(i["e"])(this.value),dictItems:[]}},mounted:function(){this.refresh()},watch:{value:function(){var e=Object(i["e"])(this.value);l.isArray(e)?l.isArray(this.model)?0!==l.difference(e,this.model).length&&(this.model=e):this.model=e:e!==this.model&&(this.model=e)},exclusions:function(){this.refresh()}},methods:{exclusionsHandle:function(){if(this.exclusions&&this.exclusions.length>0&&this.dictItems&&this.dictItems.length>0){var e={};this.exclusions.forEach((function(t){e["val_"+t]="1"}));var t=[];this.dictItems.forEach((function(o){"1"!==e["val_"+o.itemKey]&&t.push(o)})),this.dictItems=t}},updateValue:function(){var e=this.model;if(this.number&&(e=Object(i["d"])(e)),this.$emit("input",e),this.$emit("on-change",e),this.labelText){var t="";this.dictItems.forEach((function(o){o.k===e&&(t=o.v)})),this.$emit("on-text",{value:e,label:t}),this.$emit("on-change",{value:e})}},refresh:function(){var e=this;if(null!==this.localDictItems&&this.localDictItems.length>0)e.loadDict(this.localDictItems);else if(null!==this.kind&&""!==this.kind){var t=this.kind;if(""!==this.pid&&(t=this.kind+"_"+this.pid),null!==this.$store&&void 0!==this.$store){var o=this.$store.dispatch(n["a"].types.LOAD_DICT_INFO,{kind:t});o.then((function(t){e.loadDict(t)}))}}},loadDict:function(e){this.dictItems=e,this.exclusionsHandle()}}},c=r,u=o("2877"),d=Object(u["a"])(c,s,a,!1,null,null,null);t["a"]=d.exports},d99c:function(e,t,o){},e2ee:function(e,t,o){},f3e3:function(e,t,o){"use strict";o("d99c")}}]);