(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ba686c18"],{"068c":function(e,s,t){"use strict";t.r(s);var r=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("Card",[t("p",{attrs:{slot:"title"},slot:"title"},[t("Icon",{attrs:{type:"md-person"}}),e._v("\n      个人信息\n    ")],1),t("div",[t("Form",{ref:"userForm",attrs:{model:e.userForm,"label-width":100,"label-position":"right",rules:e.inforValidate}},[t("FormItem",{attrs:{label:"用户名：",prop:"userName"}},[t("div",{staticStyle:{display:"inline-block",width:"300px"}},[e._v("\n            "+e._s(e.userForm.userName)+"\n          ")])]),t("FormItem",{attrs:{label:"用户昵称：",prop:"nickName"}},[t("div",{staticStyle:{display:"inline-block",width:"300px"}},[t("Input",{model:{value:e.userForm.nickName,callback:function(s){e.$set(e.userForm,"nickName",s)},expression:"userForm.nickName"}})],1)]),t("FormItem",{attrs:{label:"性别：",prop:"gender"}},[t("div",{staticStyle:{display:"inline-block",width:"300px"}},[t("dict-radio",{attrs:{number:!0,kind:this.constants.dicts.dictKinds.STD_GENDER},model:{value:e.userForm.gender,callback:function(s){e.$set(e.userForm,"gender",s)},expression:"userForm.gender"}})],1)]),t("FormItem",{attrs:{label:"公司：",prop:"remark"}},[t("div",{staticStyle:{display:"inline-block",width:"300px"}},[t("Input",{model:{value:e.userForm.remark,callback:function(s){e.$set(e.userForm,"remark",s)},expression:"userForm.remark"}})],1)]),t("FormItem",{attrs:{label:"生日：",prop:"birthDay"}},[t("div",{staticStyle:{display:"inline-block",width:"300px"}},[t("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"date",placeholder:"生日"},model:{value:e.userForm.birthDay,callback:function(s){e.$set(e.userForm,"birthDay",s)},expression:"userForm.birthDay"}})],1)]),t("FormItem",{attrs:{label:"角色码："}},[t("span",[e._v(e._s(e.userForm.roleCode))])]),t("FormItem",{attrs:{label:"登录密码："}},[t("Button",{attrs:{type:"text",size:"small"},on:{click:e.showEditPassword}},[e._v("修改密码")])],1),t("div",[t("Button",{staticStyle:{width:"100px"},attrs:{type:"text"},on:{click:e.cancelEditUserInfo}},[e._v("取消")]),t("Button",{staticStyle:{width:"100px"},attrs:{type:"primary",loading:e.save_loading},on:{click:e.saveEdit}},[e._v("保存\n          ")])],1)],1)],1)]),t("Modal",{attrs:{closable:!1,"mask-closable":!1,width:500},model:{value:e.editPasswordModal,callback:function(s){e.editPasswordModal=s},expression:"editPasswordModal"}},[t("h3",{staticStyle:{color:"#2D8CF0"},attrs:{slot:"header"},slot:"header"},[e._v("修改密码")]),t("Form",{ref:"editPasswordForm",attrs:{model:e.editPasswordForm,"label-width":100,"label-position":"right",rules:e.passwordValidate}},[t("FormItem",{attrs:{label:"原密码",prop:"oldPass",error:e.oldPassError}},[t("Input",{attrs:{placeholder:"请输入现在使用的密码",type:"password"},model:{value:e.editPasswordForm.oldPass,callback:function(s){e.$set(e.editPasswordForm,"oldPass",s)},expression:"editPasswordForm.oldPass"}})],1),t("FormItem",{attrs:{label:"新密码",prop:"newPass"}},[t("Input",{attrs:{placeholder:"请输入新密码，至少6位字符",type:"password"},model:{value:e.editPasswordForm.newPass,callback:function(s){e.$set(e.editPasswordForm,"newPass",s)},expression:"editPasswordForm.newPass"}})],1),t("FormItem",{attrs:{label:"确认新密码",prop:"rePass"}},[t("Input",{attrs:{placeholder:"请再次输入新密码",type:"password"},model:{value:e.editPasswordForm.rePass,callback:function(s){e.$set(e.editPasswordForm,"rePass",s)},expression:"editPasswordForm.rePass"}})],1)],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{type:"text"},on:{click:e.cancelEditPass}},[e._v("取消")]),t("Button",{attrs:{type:"primary",loading:e.savePassLoading},on:{click:e.saveEditPass}},[e._v("保存")])],1)],1)],1)},a=[],o=(t("7f7f"),t("6477")),i=t("e6fd"),n=t("86b0"),d={name:"ownspace_index",data:function(){var e=this,s=function(s,t,r){t!==e.editPasswordForm.newPass?r(new Error("两次输入密码不一致")):r()};return{constants:i["a"],userForm:{userName:"",nickName:"",roleCode:"",gender:1,remark:"",birthDay:null},save_loading:!1,editPasswordModal:!1,savePassLoading:!1,oldPassError:"",inforValidate:{nickName:[{required:!0,message:"请输入昵称",trigger:"blur"}]},editPasswordForm:{oldPass:"",newPass:"",rePass:""},passwordValidate:{oldPass:[{required:!0,message:"请输入原密码",trigger:"blur"}],newPass:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,message:"请至少输入6个字符",trigger:"blur"},{max:32,message:"最多输入32个字符",trigger:"blur"}],rePass:[{required:!0,message:"请再次输入新密码",trigger:"blur"},{validator:s,trigger:"blur"}]}}},computed:{userInfo:function(){return this.$store.state.user.userInfo}},watch:{userInfo:function(e){this.init(e)}},methods:{showEditPassword:function(){this.editPasswordForm.oldPass="",this.editPasswordForm.newPass="",this.editPasswordForm.rePass="",this.editPasswordModal=!0},cancelEditUserInfo:function(){this.$store.commit("removeTag","ownspace_index"),localStorage.pageOpenedList=JSON.stringify(this.$store.state.app.pageOpenedList);var e="";e=this.$store.state.app.pageOpenedList.length>1?this.$store.state.app.pageOpenedList[1].name:this.$store.state.app.pageOpenedList[0].name,this.$router.push({name:e})},saveEdit:function(){var e=this;this.$refs["userForm"].validate((function(s){s&&e.saveInfoAjax()}))},cancelEditPass:function(){this.editPasswordModal=!1},saveEditPass:function(){var e=this,s=this;this.$refs["editPasswordForm"].validate((function(t){if(t){var r=n["a"].serializeObject(e.editPasswordForm,!0,!0),a=e.$store.dispatch(i["a"].types.CHANGE_PASSWORD,{data:r,_vue:e,loadingKey:"savePassLoading"});a.then((function(e){s.cancelEditPass(),s.$Message.success("修改成功")}))}}))},init:function(e){null!==e&&void 0!==e||(e=this.$store.state.user.userInfo),void 0!==e&&null!==e&&(this.userForm.userName=e.userName,this.userForm.nickName=e.nickName,this.userForm.roleCode=e.roleCode,this.userForm.gender=e.gender,this.userForm.remark=e.remark,e.birthDay&&(this.userForm.birthDay=new Date(e.birthDay)))},saveInfoAjax:function(){var e=n["a"].serializeObject(this.userForm,!0,!0);n["a"].postSubmit(this,i["a"].urls.sys.acUser.updateUserInfo,e,(function(e){this.$Message.success("保存成功"),this.$store.commit(i["a"].types.SET_LOGIN_USER,{userInfo:e.value})}),null,"save_loading")}},mounted:function(){this.init()},components:{dictRadio:o["a"]}},l=d,c=(t("f27e"),t("2877")),m=Object(c["a"])(l,r,a,!1,null,null,null);s["default"]=m.exports},f27e:function(e,s,t){"use strict";t("f903")},f903:function(e,s,t){}}]);